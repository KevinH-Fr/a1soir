import{A as t,B as r,M as n,D as o,P as s}from"../_/64701bd1.js";export{j as AbstractExpandedDecoder,A as AztecCodeReader,B as BrowserCodeReader,m as BrowserMultiFormatReader,l as CodaBarReader,C as Code128Reader,f as Code39Reader,g as Code93Reader,b as DataMatrixDecodedBitStreamParser,D as DataMatrixReader,e as EAN13Reader,H as HTMLCanvasElementLuminanceSource,I as ITFReader,M as MultiFormatOneDReader,a as MultiFormatReader,O as OneDReader,d as PDF417DecodedBitStreamParser,E as PDF417DecoderErrorCorrection,P as PDF417Reader,c as PDF417ResultMetadata,h as RSS14Reader,i as RSSExpandedReader,R as ReaderException,V as VideoInputDevice,k as createAbstractExpandedDecoder}from"../_/64701bd1.js";import{Q as u}from"../_/ff5a5ac8.js";export{B as BitSource,C as ChecksumException,b as QRCodeDataMask,D as QRCodeDecodedBitStreamParser,Q as QRCodeReader,R as Result,a as ResultMetadataType}from"../_/ff5a5ac8.js";import p from"./core/EncodeHintType.js";export{default as EncodeHintType}from"./core/EncodeHintType.js";import{E as v,R as y}from"../_/e6040c7c.js";export{E as QRCodeEncoder,R as ReedSolomonEncoder}from"../_/e6040c7c.js";import{E as w}from"../_/1fa8ad36.js";export{A as ArgumentException,E as QRCodeDecoderErrorCorrectionLevel,F as QRCodeDecoderFormatInformation,V as QRCodeVersion}from"../_/1fa8ad36.js";import _ from"./core/IllegalArgumentException.js";export{default as IllegalArgumentException}from"./core/IllegalArgumentException.js";import{I as x}from"../_/7e170ba1.js";export{I as IllegalStateException,a as ReedSolomonDecoder,R as ReedSolomonException}from"../_/7e170ba1.js";import{G as T}from"../_/4594fdf2.js";export{A as ArithmeticException,G as GenericGF,a as GenericGFPoly}from"../_/4594fdf2.js";export{E as Exception}from"../_/9f6897e2.js";import{C as L}from"../_/7db0be76.js";export{C as CharacterSetECI,F as FormatException}from"../_/7db0be76.js";export{N as NotFoundException}from"../_/1895eef9.js";import{S as z,a as X}from"../_/18c621f0.js";export{S as StringUtils,U as UnsupportedOperationException,a as ZXingStringEncoding}from"../_/18c621f0.js";export{default as WriterException}from"./core/WriterException.js";import Z from"./core/BarcodeFormat.js";export{default as BarcodeFormat}from"./core/BarcodeFormat.js";export{B as Binarizer,G as GlobalHistogramBinarizer,H as HybridBinarizer}from"../_/e9d9744a.js";export{default as BinaryBitmap}from"./core/BinaryBitmap.js";export{default as DecodeHintType}from"./core/DecodeHintType.js";import Y from"./core/InvertedLuminanceSource.js";export{default as InvertedLuminanceSource}from"./core/InvertedLuminanceSource.js";import q from"./core/LuminanceSource.js";export{default as LuminanceSource}from"./core/LuminanceSource.js";import{B as $}from"../_/0316ae57.js";export{B as BitMatrix}from"../_/0316ae57.js";import{S as J}from"../_/6880e7d6.js";export{S as ZXingSystem}from"../_/6880e7d6.js";export{M as MathUtils,R as ResultPoint}from"../_/6750feca.js";import{S as K}from"../_/c0515997.js";export{S as ZXingStringBuilder}from"../_/c0515997.js";import{A as tt}from"../_/ae45e242.js";export{A as ZXingArrays}from"../_/ae45e242.js";import{I as et}from"../_/d30d87de.js";export{I as ZXingInteger}from"../_/d30d87de.js";import rt from"./core/common/BitArray.js";export{default as BitArray}from"./core/common/BitArray.js";export{D as DecoderResult}from"../_/91e4a95b.js";export{D as DefaultGridSampler,G as GridSampler,a as GridSamplerInstance,P as PerspectiveTransform}from"../_/788785c7.js";export{D as DetectorResult}from"../_/5d821cf1.js";export{D as AztecDetector,P as AztecPoint,W as WhiteRectangleDetector}from"../_/6eb101b8.js";import nt from"./core/qrcode/encoder/ByteMatrix.js";export{default as QRCodeByteMatrix}from"./core/qrcode/encoder/ByteMatrix.js";export{default as QRCodeMode}from"./core/qrcode/decoder/Mode.js";export{default as QRCodeEncoderQRCode}from"./core/qrcode/encoder/QRCode.js";export{a as QRCodeMaskUtil,M as QRCodeMatrixUtil}from"../_/66c4e8ff.js";export{default as AztecDetectorResult}from"./core/aztec/AztecDetectorResult.js";export{default as AztecDecoder}from"./core/aztec/decoder/Decoder.js";import"./core/qrcode/decoder/QRCodeDecoderMetaData.js";import"./core/qrcode/detector/Detector.js";import"./core/qrcode/detector/FinderPatternFinder.js";import"./core/qrcode/detector/FinderPatternInfo.js";import"ts-custom-error";var ot=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());var it=function(e){ot(BrowserAztecCodeReader,e);
/**
     * Creates an instance of BrowserAztecCodeReader.
     * @param {number} [timeBetweenScansMillis=500] the time delay between subsequent decode tries
     *
     * @memberOf BrowserAztecCodeReader
     */function BrowserAztecCodeReader(r){void 0===r&&(r=500);return e.call(this,new t,r)||this}return BrowserAztecCodeReader}(r);var at=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());
/**
 * @deprecated Moving to @zxing/browser
 *
 * Barcode reader reader to use from browser.
 */var st=function(t){at(BrowserBarcodeReader,t);
/**
     * Creates an instance of BrowserBarcodeReader.
     * @param {number} [timeBetweenScansMillis=500] the time delay between subsequent decode tries
     * @param {Map<DecodeHintType, any>} hints
     */function BrowserBarcodeReader(e,r){void 0===e&&(e=500);return t.call(this,new n(r),e,r)||this}return BrowserBarcodeReader}(r);var ct=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());
/**
 * @deprecated Moving to @zxing/browser
 *
 * QR Code reader to use from browser.
 */var ht=function(t){ct(BrowserDatamatrixCodeReader,t);
/**
     * Creates an instance of BrowserQRCodeReader.
     * @param {number} [timeBetweenScansMillis=500] the time delay between subsequent decode tries
     */function BrowserDatamatrixCodeReader(e){void 0===e&&(e=500);return t.call(this,new o,e)||this}return BrowserDatamatrixCodeReader}(r);var ut=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());
/**
 * @deprecated Moving to @zxing/browser
 *
 * QR Code reader to use from browser.
 */var dt=function(t){ut(BrowserPDF417Reader,t);
/**
     * Creates an instance of BrowserPDF417Reader.
     * @param {number} [timeBetweenScansMillis=500] the time delay between subsequent decode tries
     */function BrowserPDF417Reader(e){void 0===e&&(e=500);return t.call(this,new s,e)||this}return BrowserPDF417Reader}(r);var ft=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());
/**
 * @deprecated Moving to @zxing/browser
 *
 * QR Code reader to use from browser.
 */var lt=function(t){ft(BrowserQRCodeReader,t);
/**
     * Creates an instance of BrowserQRCodeReader.
     * @param {number} [timeBetweenScansMillis=500] the time delay between subsequent decode tries
     */function BrowserQRCodeReader(e){void 0===e&&(e=500);return t.call(this,new u,e)||this}return BrowserQRCodeReader}(r);
/**
 * @deprecated Moving to @zxing/browser
 */var pt=function(){function BrowserQRCodeSvgWriter(){}
/**
     * Writes and renders a QRCode SVG element.
     *
     * @param contents
     * @param width
     * @param height
     * @param hints
     */BrowserQRCodeSvgWriter.prototype.write=function(t,e,r,n){void 0===n&&(n=null);if(0===t.length)throw new _("Found empty contents");if(e<0||r<0)throw new _("Requested dimensions are too small: "+e+"x"+r);var o=w.L;var i=BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE;if(null!==n){void 0!==n.get(p.ERROR_CORRECTION)&&(o=w.fromString(n.get(p.ERROR_CORRECTION).toString()));void 0!==n.get(p.MARGIN)&&(i=Number.parseInt(n.get(p.MARGIN).toString(),10))}var a=v.encode(t,o,n);return this.renderResult(a,e,r,i)};BrowserQRCodeSvgWriter.prototype.writeToDom=function(t,e,r,n,o){void 0===o&&(o=null);"string"===typeof t&&(t=document.querySelector(t));var i=this.write(e,r,n,o);t&&t.appendChild(i)};BrowserQRCodeSvgWriter.prototype.renderResult=function(t,e,r,n){var o=t.getMatrix();if(null===o)throw new x;var i=o.getWidth();var a=o.getHeight();var s=i+2*n;var c=a+2*n;var h=Math.max(e,s);var u=Math.max(r,c);var d=Math.min(Math.floor(h/s),Math.floor(u/c));var f=Math.floor((h-i*d)/2);var l=Math.floor((u-a*d)/2);var p=this.createSVGElement(h,u);for(var v=0,g=l;v<a;v++,g+=d)for(var C=0,y=f;C<i;C++,y+=d)if(1===o.get(C,v)){var m=this.createSvgRectElement(y,g,d,d);p.appendChild(m)}return p};
/**
     * Creates a SVG element.
     *
     * @param w SVG's width attribute
     * @param h SVG's height attribute
     */BrowserQRCodeSvgWriter.prototype.createSVGElement=function(t,e){var r=document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS,"svg");r.setAttributeNS(null,"height",t.toString());r.setAttributeNS(null,"width",e.toString());return r};
/**
     * Creates a SVG rect element.
     *
     * @param x Element's x coordinate
     * @param y Element's y coordinate
     * @param w Element's width attribute
     * @param h Element's height attribute
     */BrowserQRCodeSvgWriter.prototype.createSvgRectElement=function(t,e,r,n){var o=document.createElementNS(BrowserQRCodeSvgWriter.SVG_NS,"rect");o.setAttributeNS(null,"x",t.toString());o.setAttributeNS(null,"y",e.toString());o.setAttributeNS(null,"height",r.toString());o.setAttributeNS(null,"width",n.toString());o.setAttributeNS(null,"fill","#000000");return o};BrowserQRCodeSvgWriter.QUIET_ZONE_SIZE=4;BrowserQRCodeSvgWriter.SVG_NS="http://www.w3.org/2000/svg";return BrowserQRCodeSvgWriter}();var vt=function(){function QRCodeWriter(){}QRCodeWriter.prototype.encode=function(t,e,r,n,o){if(0===t.length)throw new _("Found empty contents");if(e!==Z.QR_CODE)throw new _("Can only encode QR_CODE, but got "+e);if(r<0||n<0)throw new _("Requested dimensions are too small: "+r+"x"+n);var i=w.L;var a=QRCodeWriter.QUIET_ZONE_SIZE;if(null!==o){void 0!==o.get(p.ERROR_CORRECTION)&&(i=w.fromString(o.get(p.ERROR_CORRECTION).toString()));void 0!==o.get(p.MARGIN)&&(a=Number.parseInt(o.get(p.MARGIN).toString(),10))}var s=v.encode(t,i,o);return QRCodeWriter.renderResult(s,r,n,a)};QRCodeWriter.renderResult=function(t,e,r,n){var o=t.getMatrix();if(null===o)throw new x;var i=o.getWidth();var a=o.getHeight();var s=i+2*n;var c=a+2*n;var h=Math.max(e,s);var u=Math.max(r,c);var d=Math.min(Math.floor(h/s),Math.floor(u/c));var f=Math.floor((h-i*d)/2);var l=Math.floor((u-a*d)/2);var p=new $(h,u);for(var v=0,g=l;v<a;v++,g+=d)for(var C=0,y=f;C<i;C++,y+=d)1===o.get(C,v)&&p.setRegion(y,g,d,d);return p};QRCodeWriter.QUIET_ZONE_SIZE=4;return QRCodeWriter}();var gt=function(){function MultiFormatWriter(){}MultiFormatWriter.prototype.encode=function(t,e,r,n,o){var i;switch(e){case Z.QR_CODE:i=new vt;break;default:throw new _("No encoder available for format "+e)}return i.encode(t,e,r,n,o)};return MultiFormatWriter}();var Ct=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());var yt=function(t){Ct(PlanarYUVLuminanceSource,t);function PlanarYUVLuminanceSource(e,r,n,o,i,a,s,c){var h=t.call(this,a,s)||this;h.yuvData=e;h.dataWidth=r;h.dataHeight=n;h.left=o;h.top=i;if(o+a>r||i+s>n)throw new _("Crop rectangle does not fit within image data.");c&&h.reverseHorizontal(a,s);return h}PlanarYUVLuminanceSource.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new _("Requested row is outside the image: "+t);var r=this.getWidth();(null===e||void 0===e||e.length<r)&&(e=new Uint8ClampedArray(r));var n=(t+this.top)*this.dataWidth+this.left;J.arraycopy(this.yuvData,n,e,0,r);return e};PlanarYUVLuminanceSource.prototype.getMatrix=function(){var t=this.getWidth();var e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.yuvData;var r=t*e;var n=new Uint8ClampedArray(r);var o=this.top*this.dataWidth+this.left;if(t===this.dataWidth){J.arraycopy(this.yuvData,o,n,0,r);return n}for(var i=0;i<e;i++){var a=i*t;J.arraycopy(this.yuvData,o,n,a,t);o+=this.dataWidth}return n};PlanarYUVLuminanceSource.prototype.isCropSupported=function(){return true};PlanarYUVLuminanceSource.prototype.crop=function(t,e,r,n){return new PlanarYUVLuminanceSource(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+e,r,n,false)};PlanarYUVLuminanceSource.prototype.renderThumbnail=function(){var t=this.getWidth()/PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR;var e=this.getHeight()/PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR;var r=new Int32Array(t*e);var n=this.yuvData;var o=this.top*this.dataWidth+this.left;for(var i=0;i<e;i++){var a=i*t;for(var s=0;s<t;s++){var c=255&n[o+s*PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR];r[a+s]=4278190080|65793*c}o+=this.dataWidth*PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR}return r};PlanarYUVLuminanceSource.prototype.getThumbnailWidth=function(){return this.getWidth()/PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR};PlanarYUVLuminanceSource.prototype.getThumbnailHeight=function(){return this.getHeight()/PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR};PlanarYUVLuminanceSource.prototype.reverseHorizontal=function(t,e){var r=this.yuvData;for(var n=0,o=this.top*this.dataWidth+this.left;n<e;n++,o+=this.dataWidth){var i=o+t/2;for(var a=o,s=o+t-1;a<i;a++,s--){var c=r[a];r[a]=r[s];r[s]=c}}};PlanarYUVLuminanceSource.prototype.invert=function(){return new Y(this)};PlanarYUVLuminanceSource.THUMBNAIL_SCALE_FACTOR=2;return PlanarYUVLuminanceSource}(q);var mt=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());var Et=function(t){mt(RGBLuminanceSource,t);function RGBLuminanceSource(e,r,n,o,i,a,s){var c=t.call(this,r,n)||this;c.dataWidth=o;c.dataHeight=i;c.left=a;c.top=s;if(4===e.BYTES_PER_ELEMENT){var h=r*n;var u=new Uint8ClampedArray(h);for(var d=0;d<h;d++){var f=e[d];var l=f>>16&255;var p=f>>7&510;var v=255&f;u[d]=(l+p+v)/4&255}c.luminances=u}else c.luminances=e;void 0===o&&(c.dataWidth=r);void 0===i&&(c.dataHeight=n);void 0===a&&(c.left=0);void 0===s&&(c.top=0);if(c.left+r>c.dataWidth||c.top+n>c.dataHeight)throw new _("Crop rectangle does not fit within image data.");return c}RGBLuminanceSource.prototype.getRow=function(t,e){if(t<0||t>=this.getHeight())throw new _("Requested row is outside the image: "+t);var r=this.getWidth();(null===e||void 0===e||e.length<r)&&(e=new Uint8ClampedArray(r));var n=(t+this.top)*this.dataWidth+this.left;J.arraycopy(this.luminances,n,e,0,r);return e};RGBLuminanceSource.prototype.getMatrix=function(){var t=this.getWidth();var e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.luminances;var r=t*e;var n=new Uint8ClampedArray(r);var o=this.top*this.dataWidth+this.left;if(t===this.dataWidth){J.arraycopy(this.luminances,o,n,0,r);return n}for(var i=0;i<e;i++){var a=i*t;J.arraycopy(this.luminances,o,n,a,t);o+=this.dataWidth}return n};RGBLuminanceSource.prototype.isCropSupported=function(){return true};RGBLuminanceSource.prototype.crop=function(t,e,r,n){return new RGBLuminanceSource(this.luminances,r,n,this.dataWidth,this.dataHeight,this.left+t,this.top+e)};RGBLuminanceSource.prototype.invert=function(){return new Y(this)};return RGBLuminanceSource}(q);var St=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());var wt=function(t){St(Charset,t);function Charset(){return null!==t&&t.apply(this,arguments)||this}Charset.forName=function(t){return this.getCharacterSetECIByName(t)};return Charset}(L);var At=function(){function StandardCharsets(){}StandardCharsets.ISO_8859_1=L.ISO8859_1;return StandardCharsets}();var It=function(){
/**
     * Main constructor
     *
     * @param codewords the codewords to place
     * @param numcols   the number of columns
     * @param numrows   the number of rows
     */
function DefaultPlacement(t,e,r){this.codewords=t;this.numcols=e;this.numrows=r;this.bits=new Uint8Array(e*r);tt.fill(this.bits,2)}DefaultPlacement.prototype.getNumrows=function(){return this.numrows};DefaultPlacement.prototype.getNumcols=function(){return this.numcols};DefaultPlacement.prototype.getBits=function(){return this.bits};DefaultPlacement.prototype.getBit=function(t,e){return 1===this.bits[e*this.numcols+t]};DefaultPlacement.prototype.setBit=function(t,e,r){this.bits[e*this.numcols+t]=r?1:0};DefaultPlacement.prototype.noBit=function(t,e){return 2===this.bits[e*this.numcols+t]};DefaultPlacement.prototype.place=function(){var t=0;var e=4;var r=0;do{e===this.numrows&&0===r&&this.corner1(t++);e===this.numrows-2&&0===r&&this.numcols%4!==0&&this.corner2(t++);e===this.numrows-2&&0===r&&this.numcols%8===4&&this.corner3(t++);e===this.numrows+4&&2===r&&this.numcols%8===0&&this.corner4(t++);do{e<this.numrows&&r>=0&&this.noBit(r,e)&&this.utah(e,r,t++);e-=2;r+=2}while(e>=0&&r<this.numcols);e++;r+=3;do{e>=0&&r<this.numcols&&this.noBit(r,e)&&this.utah(e,r,t++);e+=2;r-=2}while(e<this.numrows&&r>=0);e+=3;r++}while(e<this.numrows||r<this.numcols);if(this.noBit(this.numcols-1,this.numrows-1)){this.setBit(this.numcols-1,this.numrows-1,true);this.setBit(this.numcols-2,this.numrows-2,true)}};DefaultPlacement.prototype.module=function(t,e,r,n){if(t<0){t+=this.numrows;e+=4-(this.numrows+4)%8}if(e<0){e+=this.numcols;t+=4-(this.numcols+4)%8}var o=this.codewords.charCodeAt(r);o&=1<<8-n;this.setBit(e,t,0!==o)};
/**
     * Places the 8 bits of a utah-shaped symbol character in ECC200.
     *
     * @param row the row
     * @param col the column
     * @param pos character position
     */DefaultPlacement.prototype.utah=function(t,e,r){this.module(t-2,e-2,r,1);this.module(t-2,e-1,r,2);this.module(t-1,e-2,r,3);this.module(t-1,e-1,r,4);this.module(t-1,e,r,5);this.module(t,e-2,r,6);this.module(t,e-1,r,7);this.module(t,e,r,8)};DefaultPlacement.prototype.corner1=function(t){this.module(this.numrows-1,0,t,1);this.module(this.numrows-1,1,t,2);this.module(this.numrows-1,2,t,3);this.module(0,this.numcols-2,t,4);this.module(0,this.numcols-1,t,5);this.module(1,this.numcols-1,t,6);this.module(2,this.numcols-1,t,7);this.module(3,this.numcols-1,t,8)};DefaultPlacement.prototype.corner2=function(t){this.module(this.numrows-3,0,t,1);this.module(this.numrows-2,0,t,2);this.module(this.numrows-1,0,t,3);this.module(0,this.numcols-4,t,4);this.module(0,this.numcols-3,t,5);this.module(0,this.numcols-2,t,6);this.module(0,this.numcols-1,t,7);this.module(1,this.numcols-1,t,8)};DefaultPlacement.prototype.corner3=function(t){this.module(this.numrows-3,0,t,1);this.module(this.numrows-2,0,t,2);this.module(this.numrows-1,0,t,3);this.module(0,this.numcols-2,t,4);this.module(0,this.numcols-1,t,5);this.module(1,this.numcols-1,t,6);this.module(2,this.numcols-1,t,7);this.module(3,this.numcols-1,t,8)};DefaultPlacement.prototype.corner4=function(t){this.module(this.numrows-1,0,t,1);this.module(this.numrows-1,this.numcols-1,t,2);this.module(0,this.numcols-3,t,3);this.module(0,this.numcols-2,t,4);this.module(0,this.numcols-1,t,5);this.module(1,this.numcols-3,t,6);this.module(1,this.numcols-2,t,7);this.module(1,this.numcols-1,t,8)};return DefaultPlacement}();var _t;var bt=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68];var Bt=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]];var Mt=301;var static_LOG=function(t,e){var r=1;for(var n=0;n<255;n++){e[n]=r;t[r]=n;r*=2;r>=256&&(r^=Mt)}return{LOG:t,ALOG:e}};var xt=(_t=static_LOG([],[]),_t.LOG),Tt=_t.ALOG;var Rt;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE";t[t.FORCE_SQUARE=1]="FORCE_SQUARE";t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Rt||(Rt={}));var Dt=129;var Lt=230;var Ot=231;var Pt=235;var Nt=236;var Wt=237;var kt=238;var Ft=239;var Ht=240;var jt=254;var zt=254;var Xt="[)>05";var Ut="[)>06";var Vt="";var Qt=0;var Zt=1;var Gt=2;var Yt=3;var qt=4;var $t=5;var Jt=function(){function ErrorCorrection(){}
/**
     * Creates the ECC200 error correction for an encoded message.
     *
     * @param codewords  the codewords
     * @param symbolInfo information about the symbol to be encoded
     * @return the codewords with interleaved error correction.
     */ErrorCorrection.encodeECC200=function(t,e){if(t.length!==e.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var r=new K;r.append(t);var n=e.getInterleavedBlockCount();if(1===n){var o=this.createECCBlock(t,e.getErrorCodewords());r.append(o)}else{var i=[];var a=[];for(var s=0;s<n;s++){i[s]=e.getDataLengthForInterleavedBlock(s+1);a[s]=e.getErrorLengthForInterleavedBlock(s+1)}for(var c=0;c<n;c++){var h=new K;for(var u=c;u<e.getDataCapacity();u+=n)h.append(t.charAt(u));o=this.createECCBlock(h.toString(),a[c]);var d=0;for(var f=c;f<a[c]*n;f+=n)r.setCharAt(e.getDataCapacity()+f,o.charAt(d++))}}return r.toString()};ErrorCorrection.createECCBlock=function(t,e){var r=-1;for(var n=0;n<bt.length;n++)if(bt[n]===e){r=n;break}if(r<0)throw new Error("Illegal number of error correction codewords specified: "+e);var o=Bt[r];var i=[];for(n=0;n<e;n++)i[n]=0;for(n=0;n<t.length;n++){var a=i[e-1]^t.charAt(n).charCodeAt(0);for(var s=e-1;s>0;s--)0!==a&&0!==o[s]?i[s]=i[s-1]^Tt[(xt[a]+xt[o[s]])%255]:i[s]=i[s-1];0!==a&&0!==o[0]?i[0]=Tt[(xt[a]+xt[o[0]])%255]:i[0]=0}var c=[];for(n=0;n<e;n++)c[n]=i[e-n-1];return c.map((function(t){return String.fromCharCode(t)})).join("")};return ErrorCorrection}();var Kt=function(){function ASCIIEncoder(){}ASCIIEncoder.prototype.getEncodingMode=function(){return Qt};ASCIIEncoder.prototype.encode=function(t){var e=pe.determineConsecutiveDigitCount(t.getMessage(),t.pos);if(e>=2){t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1)));t.pos+=2}else{var r=t.getCurrentChar();var n=pe.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(n!==this.getEncodingMode())switch(n){case $t:t.writeCodeword(Ot);t.signalEncoderChange($t);return;case Zt:t.writeCodeword(Lt);t.signalEncoderChange(Zt);return;case Yt:t.writeCodeword(kt);t.signalEncoderChange(Yt);break;case Gt:t.writeCodeword(Ft);t.signalEncoderChange(Gt);break;case qt:t.writeCodeword(Ht);t.signalEncoderChange(qt);break;default:throw new Error("Illegal mode: "+n)}else if(pe.isExtendedASCII(r)){t.writeCodeword(Pt);t.writeCodeword(r-128+1);t.pos++}else{t.writeCodeword(r+1);t.pos++}}};ASCIIEncoder.prototype.encodeASCIIDigits=function(t,e){if(pe.isDigit(t)&&pe.isDigit(e)){var r=10*(t-48)+(e-48);return r+130}throw new Error("not digits: "+t+e)};return ASCIIEncoder}();var te=function(){function Base256Encoder(){}Base256Encoder.prototype.getEncodingMode=function(){return $t};Base256Encoder.prototype.encode=function(t){var e=new K;e.append(0);while(t.hasMoreCharacters()){var r=t.getCurrentChar();e.append(r);t.pos++;var n=pe.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(n!==this.getEncodingMode()){t.signalEncoderChange(Qt);break}}var o=e.length()-1;var i=1;var a=t.getCodewordCount()+o+i;t.updateSymbolInfo(a);var s=t.getSymbolInfo().getDataCapacity()-a>0;if(t.hasMoreCharacters()||s)if(o<=249)e.setCharAt(0,z.getCharAt(o));else{if(!(o<=1555))throw new Error("Message length not in valid ranges: "+o);e.setCharAt(0,z.getCharAt(Math.floor(o/250)+249));e.insert(1,z.getCharAt(o%250))}var c=0;for(r=e.length();c<r;c++)t.writeCodeword(this.randomize255State(e.charAt(c).charCodeAt(0),t.getCodewordCount()+1))};Base256Encoder.prototype.randomize255State=function(t,e){var r=149*e%255+1;var n=t+r;return n<=255?n:n-256};return Base256Encoder}();var ee=function(){function C40Encoder(){}C40Encoder.prototype.getEncodingMode=function(){return Zt};C40Encoder.prototype.encodeMaximal=function(t){var e=new K;var r=0;var n=t.pos;var o=0;while(t.hasMoreCharacters()){var i=t.getCurrentChar();t.pos++;r=this.encodeChar(i,e);if(e.length()%3===0){n=t.pos;o=e.length()}}if(o!==e.length()){var a=Math.floor(e.length()/3*2);var s=Math.floor(t.getCodewordCount()+a+1);t.updateSymbolInfo(s);var c=t.getSymbolInfo().getDataCapacity()-s;var h=Math.floor(e.length()%3);(2===h&&2!==c||1===h&&(r>3||1!==c))&&(t.pos=n)}e.length()>0&&t.writeCodeword(Lt);this.handleEOD(t,e)};C40Encoder.prototype.encode=function(t){var e=new K;while(t.hasMoreCharacters()){var r=t.getCurrentChar();t.pos++;var n=this.encodeChar(r,e);var o=2*Math.floor(e.length()/3);var i=t.getCodewordCount()+o;t.updateSymbolInfo(i);var a=t.getSymbolInfo().getDataCapacity()-i;if(!t.hasMoreCharacters()){var s=new K;e.length()%3===2&&2!==a&&(n=this.backtrackOneCharacter(t,e,s,n));while(e.length()%3===1&&(n>3||1!==a))n=this.backtrackOneCharacter(t,e,s,n);break}var c=e.length();if(c%3===0){var h=pe.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(h!==this.getEncodingMode()){t.signalEncoderChange(Qt);break}}}this.handleEOD(t,e)};C40Encoder.prototype.backtrackOneCharacter=function(t,e,r,n){var o=e.length();var i=e.toString().substring(0,o-n);e.setLengthToZero();e.append(i);t.pos--;var a=t.getCurrentChar();n=this.encodeChar(a,r);t.resetSymbolInfo();return n};C40Encoder.prototype.writeNextTriplet=function(t,e){t.writeCodewords(this.encodeToCodewords(e.toString()));var r=e.toString().substring(3);e.setLengthToZero();e.append(r)};
/**
     * Handle "end of data" situations
     *
     * @param context the encoder context
     * @param buffer  the buffer with the remaining encoded characters
     */C40Encoder.prototype.handleEOD=function(t,e){var r=Math.floor(e.length()/3*2);var n=e.length()%3;var o=t.getCodewordCount()+r;t.updateSymbolInfo(o);var i=t.getSymbolInfo().getDataCapacity()-o;if(2===n){e.append("\0");while(e.length()>=3)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(jt)}else if(1===i&&1===n){while(e.length()>=3)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(jt);t.pos--}else{if(0!==n)throw new Error("Unexpected case. Please report!");while(e.length()>=3)this.writeNextTriplet(t,e);(i>0||t.hasMoreCharacters())&&t.writeCodeword(jt)}t.signalEncoderChange(Qt)};C40Encoder.prototype.encodeChar=function(t,e){if(t===" ".charCodeAt(0)){e.append(3);return 1}if(t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)){e.append(t-48+4);return 1}if(t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)){e.append(t-65+14);return 1}if(t<" ".charCodeAt(0)){e.append(0);e.append(t);return 2}if(t<="/".charCodeAt(0)){e.append(1);e.append(t-33);return 2}if(t<="@".charCodeAt(0)){e.append(1);e.append(t-58+15);return 2}if(t<="_".charCodeAt(0)){e.append(1);e.append(t-91+22);return 2}if(t<=127){e.append(2);e.append(t-96);return 2}e.append("1");var r=2;r+=this.encodeChar(t-128,e);return r};C40Encoder.prototype.encodeToCodewords=function(t){var e=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1;var r=e/256;var n=e%256;var o=new K;o.append(r);o.append(n);return o.toString()};return C40Encoder}();var re=function(){function EdifactEncoder(){}EdifactEncoder.prototype.getEncodingMode=function(){return qt};EdifactEncoder.prototype.encode=function(t){var e=new K;while(t.hasMoreCharacters()){var r=t.getCurrentChar();this.encodeChar(r,e);t.pos++;var n=e.length();if(n>=4){t.writeCodewords(this.encodeToCodewords(e.toString()));var o=e.toString().substring(4);e.setLengthToZero();e.append(o);var i=pe.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){t.signalEncoderChange(Qt);break}}}e.append(z.getCharAt(31));this.handleEOD(t,e)};
/**
     * Handle "end of data" situations
     *
     * @param context the encoder context
     * @param buffer  the buffer with the remaining encoded characters
     */EdifactEncoder.prototype.handleEOD=function(t,e){try{var r=e.length();if(0===r)return;if(1===r){t.updateSymbolInfo();var n=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();var o=t.getRemainingCharacters();if(o>n){t.updateSymbolInfo(t.getCodewordCount()+1);n=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()}if(o<=n&&n<=2)return}if(r>4)throw new Error("Count must not exceed 4");var i=r-1;var a=this.encodeToCodewords(e.toString());var s=!t.hasMoreCharacters();var c=s&&i<=2;if(i<=2){t.updateSymbolInfo(t.getCodewordCount()+i);n=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();if(n>=3){c=false;t.updateSymbolInfo(t.getCodewordCount()+a.length)}}if(c){t.resetSymbolInfo();t.pos-=i}else t.writeCodewords(a)}finally{t.signalEncoderChange(Qt)}};EdifactEncoder.prototype.encodeChar=function(t,e){t>=" ".charCodeAt(0)&&t<="?".charCodeAt(0)?e.append(t):t>="@".charCodeAt(0)&&t<="^".charCodeAt(0)?e.append(z.getCharAt(t-64)):pe.illegalCharacter(z.getCharAt(t))};EdifactEncoder.prototype.encodeToCodewords=function(t){var e=t.length;if(0===e)throw new Error("StringBuilder must not be empty");var r=t.charAt(0).charCodeAt(0);var n=e>=2?t.charAt(1).charCodeAt(0):0;var o=e>=3?t.charAt(2).charCodeAt(0):0;var i=e>=4?t.charAt(3).charCodeAt(0):0;var a=(r<<18)+(n<<12)+(o<<6)+i;var s=a>>16&255;var c=a>>8&255;var h=255&a;var u=new K;u.append(s);e>=2&&u.append(c);e>=3&&u.append(h);return u.toString()};return EdifactEncoder}();var ne=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());var oe=(void 0,function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){t&&n>=t.length&&(t=void 0);return{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")});var ie=function(){function SymbolInfo(t,e,r,n,o,i,a,s){void 0===a&&(a=0);void 0===s&&(s=0);this.rectangular=t;this.dataCapacity=e;this.errorCodewords=r;this.matrixWidth=n;this.matrixHeight=o;this.dataRegions=i;this.rsBlockData=a;this.rsBlockError=s}SymbolInfo.lookup=function(t,e,r,n,o){var i,a;void 0===e&&(e=0);void 0===r&&(r=null);void 0===n&&(n=null);void 0===o&&(o=true);try{for(var s=oe(se),c=s.next();!c.done;c=s.next()){var h=c.value;if((1!==e||!h.rectangular)&&((2!==e||h.rectangular)&&(null==r||!(h.getSymbolWidth()<r.getWidth()||h.getSymbolHeight()<r.getHeight()))&&(null==n||!(h.getSymbolWidth()>n.getWidth()||h.getSymbolHeight()>n.getHeight()))&&t<=h.dataCapacity))return h}}catch(t){i={error:t}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null};SymbolInfo.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}};SymbolInfo.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}};SymbolInfo.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth};SymbolInfo.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight};SymbolInfo.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()};SymbolInfo.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()};SymbolInfo.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords};SymbolInfo.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1};SymbolInfo.prototype.getDataCapacity=function(){return this.dataCapacity};SymbolInfo.prototype.getErrorCodewords=function(){return this.errorCodewords};SymbolInfo.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData};SymbolInfo.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError};return SymbolInfo}();var ae=function(t){ne(DataMatrixSymbolInfo144,t);function DataMatrixSymbolInfo144(){return t.call(this,false,1558,620,22,22,36,-1,62)||this}DataMatrixSymbolInfo144.prototype.getInterleavedBlockCount=function(){return 10};DataMatrixSymbolInfo144.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155};return DataMatrixSymbolInfo144}(ie);var se=[new ie(false,3,5,8,8,1),new ie(false,5,7,10,10,1),new ie(true,5,7,16,6,1),new ie(false,8,10,12,12,1),new ie(true,10,11,14,6,2),new ie(false,12,12,14,14,1),new ie(true,16,14,24,10,1),new ie(false,18,14,16,16,1),new ie(false,22,18,18,18,1),new ie(true,22,18,16,10,2),new ie(false,30,20,20,20,1),new ie(true,32,24,16,14,2),new ie(false,36,24,22,22,1),new ie(false,44,28,24,24,1),new ie(true,49,28,22,14,2),new ie(false,62,36,14,14,4),new ie(false,86,42,16,16,4),new ie(false,114,48,18,18,4),new ie(false,144,56,20,20,4),new ie(false,174,68,22,22,4),new ie(false,204,84,24,24,4,102,42),new ie(false,280,112,14,14,16,140,56),new ie(false,368,144,16,16,16,92,36),new ie(false,456,192,18,18,16,114,48),new ie(false,576,224,20,20,16,144,56),new ie(false,696,272,22,22,16,174,68),new ie(false,816,336,24,24,16,136,56),new ie(false,1050,408,18,18,36,175,68),new ie(false,1304,496,20,20,36,163,62),new ae];var ce=function(){function EncoderContext(t){this.msg=t;this.pos=0;this.skipAtEnd=0;var e=t.split("").map((function(t){return t.charCodeAt(0)}));var r=new K;for(var n=0,o=e.length;n<o;n++){var i=String.fromCharCode(255&e[n]);if("?"===i&&"?"!==t.charAt(n))throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(i)}this.msg=r.toString();this.shape=0;this.codewords=new K;this.newEncoding=-1}EncoderContext.prototype.setSymbolShape=function(t){this.shape=t};EncoderContext.prototype.setSizeConstraints=function(t,e){this.minSize=t;this.maxSize=e};EncoderContext.prototype.getMessage=function(){return this.msg};EncoderContext.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t};EncoderContext.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)};EncoderContext.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)};EncoderContext.prototype.getCodewords=function(){return this.codewords};EncoderContext.prototype.writeCodewords=function(t){this.codewords.append(t)};EncoderContext.prototype.writeCodeword=function(t){this.codewords.append(t)};EncoderContext.prototype.getCodewordCount=function(){return this.codewords.length()};EncoderContext.prototype.getNewEncoding=function(){return this.newEncoding};EncoderContext.prototype.signalEncoderChange=function(t){this.newEncoding=t};EncoderContext.prototype.resetEncoderSignal=function(){this.newEncoding=-1};EncoderContext.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()};EncoderContext.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd};EncoderContext.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos};EncoderContext.prototype.getSymbolInfo=function(){return this.symbolInfo};EncoderContext.prototype.updateSymbolInfo=function(t){void 0===t&&(t=this.getCodewordCount());(null==this.symbolInfo||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ie.lookup(t,this.shape,this.minSize,this.maxSize,true))};EncoderContext.prototype.resetSymbolInfo=function(){this.symbolInfo=null};return EncoderContext}();var he=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());var ue=function(t){he(X12Encoder,t);function X12Encoder(){return null!==t&&t.apply(this,arguments)||this}X12Encoder.prototype.getEncodingMode=function(){return Yt};X12Encoder.prototype.encode=function(t){var e=new K;while(t.hasMoreCharacters()){var r=t.getCurrentChar();t.pos++;this.encodeChar(r,e);var n=e.length();if(n%3===0){this.writeNextTriplet(t,e);var o=pe.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(Qt);break}}}this.handleEOD(t,e)};X12Encoder.prototype.encodeChar=function(t,e){switch(t){case 13:e.append(0);break;case"*".charCodeAt(0):e.append(1);break;case">".charCodeAt(0):e.append(2);break;case" ".charCodeAt(0):e.append(3);break;default:t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)?e.append(t-48+4):t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)?e.append(t-65+14):pe.illegalCharacter(z.getCharAt(t));break}return 1};X12Encoder.prototype.handleEOD=function(t,e){t.updateSymbolInfo();var r=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();var n=e.length();t.pos-=n;(t.getRemainingCharacters()>1||r>1||t.getRemainingCharacters()!==r)&&t.writeCodeword(zt);t.getNewEncoding()<0&&t.signalEncoderChange(Qt)};return X12Encoder}(ee);var de=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());var fe=function(t){de(TextEncoder,t);function TextEncoder(){return null!==t&&t.apply(this,arguments)||this}TextEncoder.prototype.getEncodingMode=function(){return Gt};TextEncoder.prototype.encodeChar=function(t,e){if(t===" ".charCodeAt(0)){e.append(3);return 1}if(t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)){e.append(t-48+4);return 1}if(t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)){e.append(t-97+14);return 1}if(t<" ".charCodeAt(0)){e.append(0);e.append(t);return 2}if(t<="/".charCodeAt(0)){e.append(1);e.append(t-33);return 2}if(t<="@".charCodeAt(0)){e.append(1);e.append(t-58+15);return 2}if(t>="[".charCodeAt(0)&&t<="_".charCodeAt(0)){e.append(1);e.append(t-91+22);return 2}if(t==="`".charCodeAt(0)){e.append(2);e.append(0);return 2}if(t<="Z".charCodeAt(0)){e.append(2);e.append(t-65+1);return 2}if(t<=127){e.append(2);e.append(t-123+27);return 2}e.append("1");var r=2;r+=this.encodeChar(t-128,e);return r};return TextEncoder}(ee);var le=function(){function HighLevelEncoder(){}HighLevelEncoder.randomize253State=function(t){var e=149*t%253+1;var r=Dt+e;return r<=254?r:r-254};
/**
     * Performs message encoding of a DataMatrix message using the algorithm described in annex P
     * of ISO/IEC 16022:2000(E).
     *
     * @param msg     the message
     * @param shape   requested shape. May be {@code SymbolShapeHint.FORCE_NONE},
     *                {@code SymbolShapeHint.FORCE_SQUARE} or {@code SymbolShapeHint.FORCE_RECTANGLE}.
     * @param minSize the minimum symbol size constraint or null for no constraint
     * @param maxSize the maximum symbol size constraint or null for no constraint
     * @param forceC40 enforce C40 encoding
     * @return the encoded message (the char values range from 0 to 255)
     */HighLevelEncoder.encodeHighLevel=function(t,e,r,n,o){void 0===e&&(e=0);void 0===r&&(r=null);void 0===n&&(n=null);void 0===o&&(o=false);var i=new ee;var a=[new Kt,i,new fe,new ue,new re,new te];var s=new ce(t);s.setSymbolShape(e);s.setSizeConstraints(r,n);if(t.startsWith(Xt)&&t.endsWith(Vt)){s.writeCodeword(Nt);s.setSkipAtEnd(2);s.pos+=Xt.length}else if(t.startsWith(Ut)&&t.endsWith(Vt)){s.writeCodeword(Wt);s.setSkipAtEnd(2);s.pos+=Ut.length}var c=Qt;if(o){i.encodeMaximal(s);c=s.getNewEncoding();s.resetEncoderSignal()}while(s.hasMoreCharacters()){a[c].encode(s);if(s.getNewEncoding()>=0){c=s.getNewEncoding();s.resetEncoderSignal()}}var h=s.getCodewordCount();s.updateSymbolInfo();var u=s.getSymbolInfo().getDataCapacity();h<u&&c!==Qt&&c!==$t&&c!==qt&&s.writeCodeword("þ");var d=s.getCodewords();d.length()<u&&d.append(Dt);while(d.length()<u)d.append(this.randomize253State(d.length()+1));return s.getCodewords().toString()};HighLevelEncoder.lookAheadTest=function(t,e,r){var n=this.lookAheadTestIntern(t,e,r);if(r===Yt&&n===Yt){var o=Math.min(e+3,t.length);for(var i=e;i<o;i++)if(!this.isNativeX12(t.charCodeAt(i)))return Qt}else if(r===qt&&n===qt){o=Math.min(e+4,t.length);for(i=e;i<o;i++)if(!this.isNativeEDIFACT(t.charCodeAt(i)))return Qt}return n};HighLevelEncoder.lookAheadTestIntern=function(t,e,r){if(e>=t.length)return r;var n;if(r===Qt)n=[0,1,1,1,1,1.25];else{n=[1,2,2,2,2,2.25];n[r]=0}var o=0;var i=new Uint8Array(6);var a=[];while(true){if(e+o===t.length){tt.fill(i,0);tt.fill(a,0);var s=this.findMinimums(n,a,et.MAX_VALUE,i);var c=this.getMinimumCount(i);if(a[Qt]===s)return Qt;if(1===c){if(i[$t]>0)return $t;if(i[qt]>0)return qt;if(i[Gt]>0)return Gt;if(i[Yt]>0)return Yt}return Zt}var h=t.charCodeAt(e+o);o++;if(this.isDigit(h))n[Qt]+=.5;else if(this.isExtendedASCII(h)){n[Qt]=Math.ceil(n[Qt]);n[Qt]+=2}else{n[Qt]=Math.ceil(n[Qt]);n[Qt]++}this.isNativeC40(h)?n[Zt]+=2/3:this.isExtendedASCII(h)?n[Zt]+=8/3:n[Zt]+=4/3;this.isNativeText(h)?n[Gt]+=2/3:this.isExtendedASCII(h)?n[Gt]+=8/3:n[Gt]+=4/3;this.isNativeX12(h)?n[Yt]+=2/3:this.isExtendedASCII(h)?n[Yt]+=13/3:n[Yt]+=10/3;this.isNativeEDIFACT(h)?n[qt]+=3/4:this.isExtendedASCII(h)?n[qt]+=4.25:n[qt]+=3.25;this.isSpecialB256(h)?n[$t]+=4:n[$t]++;if(o>=4){tt.fill(i,0);tt.fill(a,0);this.findMinimums(n,a,et.MAX_VALUE,i);if(a[Qt]<this.min(a[$t],a[Zt],a[Gt],a[Yt],a[qt]))return Qt;if(a[$t]<a[Qt]||a[$t]+1<this.min(a[Zt],a[Gt],a[Yt],a[qt]))return $t;if(a[qt]+1<this.min(a[$t],a[Zt],a[Gt],a[Yt],a[Qt]))return qt;if(a[Gt]+1<this.min(a[$t],a[Zt],a[qt],a[Yt],a[Qt]))return Gt;if(a[Yt]+1<this.min(a[$t],a[Zt],a[qt],a[Gt],a[Qt]))return Yt;if(a[Zt]+1<this.min(a[Qt],a[$t],a[qt],a[Gt])){if(a[Zt]<a[Yt])return Zt;if(a[Zt]===a[Yt]){var u=e+o+1;while(u<t.length){var d=t.charCodeAt(u);if(this.isX12TermSep(d))return Yt;if(!this.isNativeX12(d))break;u++}return Zt}}}}};HighLevelEncoder.min=function(t,e,r,n,o){var i=Math.min(t,Math.min(e,Math.min(r,n)));return void 0===o?i:Math.min(i,o)};HighLevelEncoder.findMinimums=function(t,e,r,n){for(var o=0;o<6;o++){var i=e[o]=Math.ceil(t[o]);if(r>i){r=i;tt.fill(n,0)}r===i&&(n[o]=n[o]+1)}return r};HighLevelEncoder.getMinimumCount=function(t){var e=0;for(var r=0;r<6;r++)e+=t[r];return e||0};HighLevelEncoder.isDigit=function(t){return t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)};HighLevelEncoder.isExtendedASCII=function(t){return t>=128&&t<=255};HighLevelEncoder.isNativeC40=function(t){return t===" ".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)};HighLevelEncoder.isNativeText=function(t){return t===" ".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)};HighLevelEncoder.isNativeX12=function(t){return this.isX12TermSep(t)||t===" ".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)};HighLevelEncoder.isX12TermSep=function(t){return 13===t||t==="*".charCodeAt(0)||t===">".charCodeAt(0)};HighLevelEncoder.isNativeEDIFACT=function(t){return t>=" ".charCodeAt(0)&&t<="^".charCodeAt(0)};HighLevelEncoder.isSpecialB256=function(t){return false};
/**
     * Determines the number of consecutive characters that are encodable using numeric compaction.
     *
     * @param msg      the message
     * @param startpos the start position within the message
     * @return the requested character count
     */HighLevelEncoder.determineConsecutiveDigitCount=function(t,e){void 0===e&&(e=0);var r=t.length;var n=e;while(n<r&&this.isDigit(t.charCodeAt(n)))n++;return n-e};HighLevelEncoder.illegalCharacter=function(t){var e=et.toHexString(t.charCodeAt(0));e="0000".substring(0,4-e.length)+e;throw new Error("Illegal character: "+t+" (0x"+e+")")};return HighLevelEncoder}();var pe=le;var ve=(void 0,function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){t&&n>=t.length&&(t=void 0);return{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")});var ge=function(){function CharsetEncoder(t){this.charset=t;this.name=t.name}CharsetEncoder.prototype.canEncode=function(t){try{return null!=X.encode(t,this.charset)}catch(t){return false}};return CharsetEncoder}();var Ce=function(){
/**
     * Constructs an encoder set
     *
     * @param stringToEncode the string that needs to be encoded
     * @param priorityCharset The preferred {@link Charset} or null.
     * @param fnc1 fnc1 denotes the character in the input that represents the FNC1 character or -1 for a non-GS1 bar
     * code. When specified, it is considered an error to pass it as argument to the methods canEncode() or encode().
     */
function ECIEncoderSet(t,e,r){var n,o,i,a,s,c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map((function(t){return new ge(wt.forName(t))}));this.encoders=[];var h=[];h.push(new ge(At.ISO_8859_1));var u=null!=e&&e.name.startsWith("UTF");for(var d=0;d<t.length;d++){var f=false;try{for(var l=(n=void 0,ve(h)),p=l.next();!p.done;p=l.next()){var v=p.value;var g=t.charAt(d);var C=g.charCodeAt(0);if(C===r||v.canEncode(g)){f=true;break}}}catch(t){n={error:t}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}if(!f)try{for(var y=(i=void 0,ve(this.ENCODERS)),m=y.next();!m.done;m=y.next()){v=m.value;if(v.canEncode(t.charAt(d))){h.push(v);f=true;break}}}catch(t){i={error:t}}finally{try{m&&!m.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}f||(u=true)}if(1!==h.length||u){this.encoders=[];var E=0;try{for(var S=ve(h),w=S.next();!w.done;w=S.next()){v=w.value;this.encoders[E++]=v}}catch(t){s={error:t}}finally{try{w&&!w.done&&(c=S.return)&&c.call(S)}finally{if(s)throw s.error}}}else this.encoders=[h[0]];var A=-1;if(null!=e)for(d=0;d<this.encoders.length;d++)if(null!=this.encoders[d]&&e.name===this.encoders[d].name){A=d;break}this.priorityEncoderIndex=A}ECIEncoderSet.prototype.length=function(){return this.encoders.length};ECIEncoderSet.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name};ECIEncoderSet.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset};ECIEncoderSet.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()};ECIEncoderSet.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex};ECIEncoderSet.prototype.canEncode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return true};ECIEncoderSet.prototype.encode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return X.encode(z.getCharAt(t),this.encoders[e].name)};return ECIEncoderSet}();var ye=3;var me=function(){
/**
     * Constructs a minimal input
     *
     * @param stringToEncode the character string to encode
     * @param priorityCharset The preferred {@link Charset}. When the value of the argument is null, the algorithm
     *   chooses charsets that leads to a minimal representation. Otherwise the algorithm will use the priority
     *   charset to encode any character in the input that can be encoded by it if the charset is among the
     *   supported charsets.
     * @param fnc1 denotes the character in the input that represents the FNC1 character or -1 if this is not GS1
     *   input.
     */
function MinimalECIInput(t,e,r){this.fnc1=r;var n=new Ce(t,e,r);if(1===n.length())for(var o=0;o<this.bytes.length;o++){var i=t.charAt(o).charCodeAt(0);this.bytes[o]=i===r?1e3:i}else this.bytes=this.encodeMinimally(t,n,r)}MinimalECIInput.prototype.getFNC1Character=function(){return this.fnc1};MinimalECIInput.prototype.length=function(){return this.bytes.length};MinimalECIInput.prototype.haveNCharacters=function(t,e){if(t+e-1>=this.bytes.length)return false;for(var r=0;r<e;r++)if(this.isECI(t+r))return false;return true};
/**
     * Returns the {@code byte} value at the specified index.  An index ranges from zero
     * to {@code length() - 1}.  The first {@code byte} value of the sequence is at
     * index zero, the next at index one, and so on, as for array
     * indexing.
     *
     * @param   index the index of the {@code byte} value to be returned
     *
     * @return  the specified {@code byte} value as character or the FNC1 character
     *
     * @throws  IndexOutOfBoundsException
     *          if the {@code index} argument is negative or not less than
     *          {@code length()}
     * @throws  IllegalArgumentException
     *          if the value at the {@code index} argument is an ECI (@see #isECI)
     */MinimalECIInput.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]};
/**
     * Returns a {@code CharSequence} that is a subsequence of this sequence.
     * The subsequence starts with the {@code char} value at the specified index and
     * ends with the {@code char} value at index {@code end - 1}.  The length
     * (in {@code char}s) of the
     * returned sequence is {@code end - start}, so if {@code start == end}
     * then an empty sequence is returned.
     *
     * @param   start   the start index, inclusive
     * @param   end     the end index, exclusive
     *
     * @return  the specified subsequence
     *
     * @throws  IndexOutOfBoundsException
     *          if {@code start} or {@code end} are negative,
     *          if {@code end} is greater than {@code length()},
     *          or if {@code start} is greater than {@code end}
     * @throws  IllegalArgumentException
     *          if a value in the range {@code start}-{@code end} is an ECI (@see #isECI)
     */MinimalECIInput.prototype.subSequence=function(t,e){if(t<0||t>e||e>this.length())throw new Error(""+t);var r=new K;for(var n=t;n<e;n++){if(this.isECI(n))throw new Error("value at "+n+" is not a character but an ECI");r.append(this.charAt(n))}return r.toString()};
/**
     * Determines if a value is an ECI
     *
     * @param   index the index of the value
     *
     * @return  true if the value at position {@code index} is an ECI
     *
     * @throws  IndexOutOfBoundsException
     *          if the {@code index} argument is negative or not less than
     *          {@code length()}
     */MinimalECIInput.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999};
/**
     * Determines if a value is the FNC1 character
     *
     * @param   index the index of the value
     *
     * @return  true if the value at position {@code index} is the FNC1 character
     *
     * @throws  IndexOutOfBoundsException
     *          if the {@code index} argument is negative or not less than
     *          {@code length()}
     */MinimalECIInput.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return 1e3===this.bytes[t]};
/**
     * Returns the {@code int} ECI value at the specified index.  An index ranges from zero
     * to {@code length() - 1}.  The first {@code byte} value of the sequence is at
     * index zero, the next at index one, and so on, as for array
     * indexing.
     *
     * @param   index the index of the {@code int} value to be returned
     *
     * @return  the specified {@code int} ECI value.
     *          The ECI specified the encoding of all bytes with a higher index until the
     *          next ECI or until the end of the input if no other ECI follows.
     *
     * @throws  IndexOutOfBoundsException
     *          if the {@code index} argument is negative or not less than
     *          {@code length()}
     * @throws  IllegalArgumentException
     *          if the value at the {@code index} argument is not an ECI (@see #isECI)
     */MinimalECIInput.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256};MinimalECIInput.prototype.addEdge=function(t,e,r){(null==t[e][r.encoderIndex]||t[e][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(t[e][r.encoderIndex]=r)};MinimalECIInput.prototype.addEdges=function(t,e,r,n,o,i){var a=t.charAt(n).charCodeAt(0);var s=0;var c=e.length();if(e.getPriorityEncoderIndex()>=0&&(a===i||e.canEncode(a,e.getPriorityEncoderIndex()))){s=e.getPriorityEncoderIndex();c=s+1}for(var h=s;h<c;h++)(a===i||e.canEncode(a,h))&&this.addEdge(r,n+1,new Ee(a,e,h,o,i))};MinimalECIInput.prototype.encodeMinimally=function(t,e,r){var n=t.length;var o=new(Ee[n+1][e.length()]);this.addEdges(t,e,o,0,null,r);for(var i=1;i<=n;i++){for(var a=0;a<e.length();a++)null!=o[i][a]&&i<n&&this.addEdges(t,e,o,i,o[i][a],r);for(a=0;a<e.length();a++)o[i-1][a]=null}var s=-1;var c=et.MAX_VALUE;for(a=0;a<e.length();a++)if(null!=o[n][a]){var h=o[n][a];if(h.cachedTotalSize<c){c=h.cachedTotalSize;s=a}}if(s<0)throw new Error('Failed to encode "'+t+'"');var u=[];var d=o[n][s];while(null!=d){if(d.isFNC1())u.unshift(1e3);else{var f=e.encode(d.c,d.encoderIndex);for(i=f.length-1;i>=0;i--)u.unshift(255&f[i])}var l=null===d.previous?0:d.previous.encoderIndex;l!==d.encoderIndex&&u.unshift(256+e.getECIValue(d.encoderIndex));d=d.previous}var p=[];for(i=0;i<p.length;i++)p[i]=u[i];return p};return MinimalECIInput}();var Ee=function(){function InputEdge(t,e,r,n,o){this.c=t;this.encoderSet=e;this.encoderIndex=r;this.previous=n;this.fnc1=o;this.c=t===o?1e3:t;var i=this.isFNC1()?1:e.encode(t,r).length;var a=null===n?0:n.encoderIndex;a!==r&&(i+=ye);null!=n&&(i+=n.cachedTotalSize);this.cachedTotalSize=i}InputEdge.prototype.isFNC1=function(){return 1e3===this.c};return InputEdge}();var Se=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());var we=(void 0,function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){t&&n>=t.length&&(t=void 0);return{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")});var Ae=(void 0,function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a});var Ie=(void 0,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ae(arguments[e]));return t});var _e;(function(t){t[t.ASCII=0]="ASCII";t[t.C40=1]="C40";t[t.TEXT=2]="TEXT";t[t.X12=3]="X12";t[t.EDF=4]="EDF";t[t.B256=5]="B256"})(_e||(_e={}));var be=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"];var Be=function(){function MinimalEncoder(){}MinimalEncoder.isExtendedASCII=function(t,e){return t!==e&&t>=128&&t<=255};MinimalEncoder.isInC40Shift1Set=function(t){return t<=31};MinimalEncoder.isInC40Shift2Set=function(t,e){var r,n;try{for(var o=we(be),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.charCodeAt(0)===t)return true}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return t===e};MinimalEncoder.isInTextShift1Set=function(t){return this.isInC40Shift1Set(t)};MinimalEncoder.isInTextShift2Set=function(t,e){return this.isInC40Shift2Set(t,e)};
/**
     * Performs message encoding of a DataMatrix message
     *
     * @param msg the message
     * @param priorityCharset The preferred {@link Charset}. When the value of the argument is null, the algorithm
     *   chooses charsets that leads to a minimal representation. Otherwise the algorithm will use the priority
     *   charset to encode any character in the input that can be encoded by it if the charset is among the
     *   supported charsets.
     * @param fnc1 denotes the character in the input that represents the FNC1 character or -1 if this is not a GS1
     *   bar code. If the value is not -1 then a FNC1 is also prepended.
     * @param shape requested shape.
     * @return the encoded message (the char values range from 0 to 255)
     */MinimalEncoder.encodeHighLevel=function(t,e,r,n){void 0===e&&(e=null);void 0===r&&(r=-1);void 0===n&&(n=0);var o=0;if(t.startsWith(Xt)&&t.endsWith(Vt)){o=5;t=t.substring(Xt.length,t.length-2)}else if(t.startsWith(Ut)&&t.endsWith(Vt)){o=6;t=t.substring(Ut.length,t.length-2)}return decodeURIComponent(escape(String.fromCharCode.apply(String,Ie(this.encode(t,e,r,n,o)))))};
/**
     * Encodes input minimally and returns an array of the codewords
     *
     * @param input The string to encode
     * @param priorityCharset The preferred {@link Charset}. When the value of the argument is null, the algorithm
     *   chooses charsets that leads to a minimal representation. Otherwise the algorithm will use the priority
     *   charset to encode any character in the input that can be encoded by it if the charset is among the
     *   supported charsets.
     * @param fnc1 denotes the character in the input that represents the FNC1 character or -1 if this is not a GS1
     *   bar code. If the value is not -1 then a FNC1 is also prepended.
     * @param shape requested shape.
     * @param macroId Prepends the specified macro function in case that a value of 5 or 6 is specified.
     * @return An array of bytes representing the codewords of a minimal encoding.
     */MinimalEncoder.encode=function(t,e,r,n,o){return this.encodeMinimally(new Te(t,e,r,n,o)).getBytes()};MinimalEncoder.addEdge=function(t,e){var r=e.fromPosition+e.characterLength;(null===t[r][e.getEndMode()]||t[r][e.getEndMode()].cachedTotalSize>e.cachedTotalSize)&&(t[r][e.getEndMode()]=e)};MinimalEncoder.getNumberOfC40Words=function(t,e,r,n){var o=0;for(var i=e;i<t.length();i++){if(t.isECI(i)){n[0]=0;return 0}var a=t.charAt(i);if(r&&pe.isNativeC40(a)||!r&&pe.isNativeText(a))o++;else if(MinimalEncoder.isExtendedASCII(a,t.getFNC1Character())){var s=255&a;s>=128&&(r&&pe.isNativeC40(s-128)||!r&&pe.isNativeText(s-128))?o+=3:o+=4}else o+=2;if(o%3===0||(o-2)%3===0&&i+1===t.length()){n[0]=i-e+1;return Math.ceil(o/3)}}n[0]=0;return 0};MinimalEncoder.addEdges=function(t,e,r,n){var o,i;if(t.isECI(r))this.addEdge(e,new xe(t,_e.ASCII,r,1,n));else{var a=t.charAt(r);if(null===n||n.getEndMode()!==_e.EDF){pe.isDigit(a)&&t.haveNCharacters(r,2)&&pe.isDigit(t.charAt(r+1))?this.addEdge(e,new xe(t,_e.ASCII,r,2,n)):this.addEdge(e,new xe(t,_e.ASCII,r,1,n));var s=[_e.C40,_e.TEXT];try{for(var c=we(s),h=c.next();!h.done;h=c.next()){var u=h.value;var d=[];MinimalEncoder.getNumberOfC40Words(t,r,u===_e.C40,d)>0&&this.addEdge(e,new xe(t,u,r,d[0],n))}}catch(t){o={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}t.haveNCharacters(r,3)&&pe.isNativeX12(t.charAt(r))&&pe.isNativeX12(t.charAt(r+1))&&pe.isNativeX12(t.charAt(r+2))&&this.addEdge(e,new xe(t,_e.X12,r,3,n));this.addEdge(e,new xe(t,_e.B256,r,1,n))}var f;for(f=0;f<3;f++){var l=r+f;if(!t.haveNCharacters(l,1)||!pe.isNativeEDIFACT(t.charAt(l)))break;this.addEdge(e,new xe(t,_e.EDF,r,f+1,n))}3===f&&t.haveNCharacters(r,4)&&pe.isNativeEDIFACT(t.charAt(r+3))&&this.addEdge(e,new xe(t,_e.EDF,r,4,n))}};MinimalEncoder.encodeMinimally=function(t){var e=t.length();var r=Array(e+1).fill(null).map((function(){return Array(6).fill(0)}));this.addEdges(t,r,0,null);for(var n=1;n<=e;n++){for(var o=0;o<6;o++)null!==r[n][o]&&n<e&&this.addEdges(t,r,n,r[n][o]);for(o=0;o<6;o++)r[n-1][o]=null}var i=-1;var a=et.MAX_VALUE;for(o=0;o<6;o++)if(null!==r[e][o]){var s=r[e][o];var c=o>=1&&o<=3?s.cachedTotalSize+1:s.cachedTotalSize;if(c<a){a=c;i=o}}if(i<0)throw new Error('Failed to encode "'+t+'"');return new Me(r[e][i])};return MinimalEncoder}();var Me=function(){function Result(t){var e=t.input;var r=0;var n=[];var o=[];var i=[];t.mode!==_e.C40&&t.mode!==_e.TEXT&&t.mode!==_e.X12||t.getEndMode()===_e.ASCII||(r+=this.prepend(xe.getBytes(254),n));var a=t;while(null!==a){r+=this.prepend(a.getDataBytes(),n);if(null===a.previous||a.getPreviousStartMode()!==a.getMode()){if(a.getMode()===_e.B256){if(r<=249){n.unshift(r);r++}else{n.unshift(r%250);n.unshift(r/250+249);r+=2}o.push(n.length);i.push(r)}this.prepend(a.getLatchBytes(),n);r=0}a=a.previous}5===e.getMacroId()?r+=this.prepend(xe.getBytes(236),n):6===e.getMacroId()&&(r+=this.prepend(xe.getBytes(237),n));e.getFNC1Character()>0&&(r+=this.prepend(xe.getBytes(232),n));for(var s=0;s<o.length;s++)this.applyRandomPattern(n,n.length-o[s],i[s]);var c=t.getMinSymbolSize(n.length);n.length<c&&n.push(129);while(n.length<c)n.push(this.randomize253State(n.length+1));this.bytes=new Uint8Array(n.length);for(s=0;s<this.bytes.length;s++)this.bytes[s]=n[s]}Result.prototype.prepend=function(t,e){for(var r=t.length-1;r>=0;r--)e.unshift(t[r]);return t.length};Result.prototype.randomize253State=function(t){var e=149*t%253+1;var r=129+e;return r<=254?r:r-254};Result.prototype.applyRandomPattern=function(t,e,r){for(var n=0;n<r;n++){var o=e+n;var i=255&t[o];var a=149*(o+1)%255+1;var s=i+a;t[o]=s<=255?s:s-256}};Result.prototype.getBytes=function(){return this.bytes};return Result}();var xe=function(){function Edge(t,e,r,n,o){this.input=t;this.mode=e;this.fromPosition=r;this.characterLength=n;this.previous=o;this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558];this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558];this.rectangularCodewordCapacities=[5,10,16,33,32,49];if(!(r+n<=t.length()))throw new Error("Invalid edge");var i=null!==o?o.cachedTotalSize:0;var a=this.getPreviousMode();switch(e){case _e.ASCII:i++;(t.isECI(r)||Be.isExtendedASCII(t.charAt(r),t.getFNC1Character()))&&i++;a!==_e.C40&&a!==_e.TEXT&&a!==_e.X12||i++;break;case _e.B256:i++;(a!==_e.B256||250===this.getB256Size())&&i++;a===_e.ASCII?i++:a!==_e.C40&&a!==_e.TEXT&&a!==_e.X12||(i+=2);break;case _e.C40:case _e.TEXT:case _e.X12:if(e===_e.X12)i+=2;else{var s=[];i+=2*Be.getNumberOfC40Words(t,r,e===_e.C40,s)}a===_e.ASCII||a===_e.B256?i++:a===e||a!==_e.C40&&a!==_e.TEXT&&a!==_e.X12||(i+=2);break;case _e.EDF:i+=3;a===_e.ASCII||a===_e.B256?i++:a!==_e.C40&&a!==_e.TEXT&&a!==_e.X12||(i+=2);break}this.cachedTotalSize=i}Edge.prototype.getB256Size=function(){var t=0;var e=this;while(null!==e&&e.mode===_e.B256&&t<=250){t++;e=e.previous}return t};Edge.prototype.getPreviousStartMode=function(){return null===this.previous?_e.ASCII:this.previous.mode};Edge.prototype.getPreviousMode=function(){return null===this.previous?_e.ASCII:this.previous.getEndMode()};Edge.prototype.getEndMode=function(){if(this.mode===_e.EDF){if(this.characterLength<4)return _e.ASCII;var t=this.getLastASCII();if(t>0&&this.getCodewordsRemaining(this.cachedTotalSize+t)<=2-t)return _e.ASCII}if(this.mode===_e.C40||this.mode===_e.TEXT||this.mode===_e.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&0===this.getCodewordsRemaining(this.cachedTotalSize))return _e.ASCII;t=this.getLastASCII();if(1===t&&0===this.getCodewordsRemaining(this.cachedTotalSize+1))return _e.ASCII}return this.mode};Edge.prototype.getMode=function(){return this.mode};Edge.prototype.getLastASCII=function(){var t=this.input.length();var e=this.fromPosition+this.characterLength;return t-e>4||e>=t?0:t-e===1?Be.isExtendedASCII(this.input.charAt(e),this.input.getFNC1Character())?0:1:t-e===2?Be.isExtendedASCII(this.input.charAt(e),this.input.getFNC1Character())||Be.isExtendedASCII(this.input.charAt(e+1),this.input.getFNC1Character())?0:pe.isDigit(this.input.charAt(e))&&pe.isDigit(this.input.charAt(e+1))?1:2:t-e===3?pe.isDigit(this.input.charAt(e))&&pe.isDigit(this.input.charAt(e+1))&&!Be.isExtendedASCII(this.input.charAt(e+2),this.input.getFNC1Character())||pe.isDigit(this.input.charAt(e+1))&&pe.isDigit(this.input.charAt(e+2))&&!Be.isExtendedASCII(this.input.charAt(e),this.input.getFNC1Character())?2:0:pe.isDigit(this.input.charAt(e))&&pe.isDigit(this.input.charAt(e+1))&&pe.isDigit(this.input.charAt(e+2))&&pe.isDigit(this.input.charAt(e+3))?2:0};Edge.prototype.getMinSymbolSize=function(t){var e,r,n,o,i,a;switch(this.input.getShapeHint()){case 1:try{for(var s=we(this.squareCodewordCapacities),c=s.next();!c.done;c=s.next()){var h=c.value;if(h>=t)return h}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}break;case 2:try{for(var u=we(this.rectangularCodewordCapacities),d=u.next();!d.done;d=u.next()){h=d.value;if(h>=t)return h}}catch(t){n={error:t}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}break}try{for(var f=we(this.allCodewordCapacities),l=f.next();!l.done;l=f.next()){h=l.value;if(h>=t)return h}}catch(t){i={error:t}}finally{try{l&&!l.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]};Edge.prototype.getCodewordsRemaining=function(t){return this.getMinSymbolSize(t)-t};Edge.getBytes=function(t,e){var r=new Uint8Array(e?2:1);r[0]=t;e&&(r[1]=e);return r};Edge.prototype.setC40Word=function(t,e,r,n,o){var i=1600*(255&r)+40*(255&n)+(255&o)+1;t[e]=i/256;t[e+1]=i%256};Edge.prototype.getX12Value=function(t){return 13===t?0:42===t?1:62===t?2:32===t?3:t>=48&&t<=57?t-44:t>=65&&t<=90?t-51:t};Edge.prototype.getX12Words=function(){if(!(this.characterLength%3===0))throw new Error("X12 words must be a multiple of 3");var t=new Uint8Array(this.characterLength/3*2);for(var e=0;e<t.length;e+=2)this.setC40Word(t,e,this.getX12Value(this.input.charAt(this.fromPosition+e/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+e/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+e/2*3+2)));return t};Edge.prototype.getShiftValue=function(t,e,r){return e&&Be.isInC40Shift1Set(t)||!e&&Be.isInTextShift1Set(t)?0:e&&Be.isInC40Shift2Set(t,r)||!e&&Be.isInTextShift2Set(t,r)?1:2};Edge.prototype.getC40Value=function(t,e,r,n){if(r===n){if(!(2===e))throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return t?r<=31?r:32===r?3:r<=47?r-33:r<=57?r-44:r<=64?r-43:r<=90?r-51:r<=95?r-69:r<=127?r-96:r:0===r?0:0===e&&r<=3?r-1:1===e&&r<=31?r:32===r?3:r>=33&&r<=47?r-33:r>=48&&r<=57?r-44:r>=58&&r<=64?r-43:r>=65&&r<=90?r-64:r>=91&&r<=95?r-69:96===r?0:r>=97&&r<=122?r-83:r>=123&&r<=127?r-96:r};Edge.prototype.getC40Words=function(t,e){var r=[];for(var n=0;n<this.characterLength;n++){var o=this.input.charAt(this.fromPosition+n);if(t&&pe.isNativeC40(o)||!t&&pe.isNativeText(o))r.push(this.getC40Value(t,0,o,e));else if(Be.isExtendedASCII(o,e)){var i=(255&o)-128;if(t&&pe.isNativeC40(i)||!t&&pe.isNativeText(i)){r.push(1);r.push(30);r.push(this.getC40Value(t,0,i,e))}else{r.push(1);r.push(30);a=this.getShiftValue(i,t,e);r.push(a);r.push(this.getC40Value(t,a,i,e))}}else{var a=this.getShiftValue(o,t,e);r.push(a);r.push(this.getC40Value(t,a,o,e))}}if(r.length%3!==0){if(!((r.length-2)%3===0&&this.fromPosition+this.characterLength===this.input.length()))throw new Error("C40 words must be a multiple of 3");r.push(0)}var s=new Uint8Array(r.length/3*2);var c=0;for(n=0;n<r.length;n+=3){this.setC40Word(s,c,255&r[n],255&r[n+1],255&r[n+2]);c+=2}return s};Edge.prototype.getEDFBytes=function(){var t=Math.ceil(this.characterLength/4);var e=new Uint8Array(3*t);var r=this.fromPosition;var n=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1);for(var o=0;o<t;o+=3){var i=[];for(var a=0;a<4;a++)i[a]=r<=n?63&this.input.charAt(r++):r===n+1?31:0;var s=i[0]<<18;s|=i[1]<<12;s|=i[2]<<6;s|=i[3];e[o]=s>>16&255;e[o+1]=s>>8&255;e[o+2]=255&s}return e};Edge.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case _e.ASCII:case _e.B256:switch(this.mode){case _e.B256:return Edge.getBytes(231);case _e.C40:return Edge.getBytes(230);case _e.TEXT:return Edge.getBytes(239);case _e.X12:return Edge.getBytes(238);case _e.EDF:return Edge.getBytes(240)}break;case _e.C40:case _e.TEXT:case _e.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case _e.ASCII:return Edge.getBytes(254);case _e.B256:return Edge.getBytes(254,231);case _e.C40:return Edge.getBytes(254,230);case _e.TEXT:return Edge.getBytes(254,239);case _e.X12:return Edge.getBytes(254,238);case _e.EDF:return Edge.getBytes(254,240)}break;case _e.EDF:if(this.mode!==_e.EDF)throw new Error("Cannot switch from EDF to "+this.mode);break}return new Uint8Array(0)};Edge.prototype.getDataBytes=function(){switch(this.mode){case _e.ASCII:return this.input.isECI(this.fromPosition)?Edge.getBytes(241,this.input.getECIValue(this.fromPosition)+1):Be.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?Edge.getBytes(235,this.input.charAt(this.fromPosition)-127):2===this.characterLength?Edge.getBytes(10*this.input.charAt(this.fromPosition)+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?Edge.getBytes(232):Edge.getBytes(this.input.charAt(this.fromPosition)+1);case _e.B256:return Edge.getBytes(this.input.charAt(this.fromPosition));case _e.C40:return this.getC40Words(true,this.input.getFNC1Character());case _e.TEXT:return this.getC40Words(false,this.input.getFNC1Character());case _e.X12:return this.getX12Words();case _e.EDF:return this.getEDFBytes()}};return Edge}();var Te=function(t){Se(Input,t);function Input(e,r,n,o,i){var a=t.call(this,e,r,n)||this;a.shape=o;a.macroId=i;return a}Input.prototype.getMacroId=function(){return this.macroId};Input.prototype.getShapeHint=function(){return this.shape};return Input}(me);var Re=function(){function DataMatrixWriter(){}DataMatrixWriter.prototype.encode=function(t,e,r,n,o){void 0===o&&(o=null);if(""===t.trim())throw new Error("Found empty contents");if(e!==Z.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+e);if(r<0||n<0)throw new Error("Requested dimensions can't be negative: "+r+"x"+n);var i=0;var a=null;var s=null;if(null!=o){var c=o.get(p.DATA_MATRIX_SHAPE);null!=c&&(i=c);var h=o.get(p.MIN_SIZE);null!=h&&(a=h);var u=o.get(p.MAX_SIZE);null!=u&&(s=u)}var d;var f=null!=o&&o.has(p.DATA_MATRIX_COMPACT)&&Boolean(o.get(p.DATA_MATRIX_COMPACT).toString());if(f){var l=o.has(p.GS1_FORMAT)&&Boolean(o.get(p.GS1_FORMAT).toString());var v=null;var g=o.has(p.CHARACTER_SET);g&&(v=wt.forName(o.get(p.CHARACTER_SET).toString()));d=Be.encodeHighLevel(t,v,l?29:-1,i)}else{var C=null!=o&&o.has(p.FORCE_C40)&&Boolean(o.get(p.FORCE_C40).toString());d=pe.encodeHighLevel(t,i,a,s,C)}var y=ie.lookup(d.length,i,a,s,true);var m=Jt.encodeECC200(d,y);var E=new It(m,y.getSymbolDataWidth(),y.getSymbolDataHeight());E.place();return this.encodeLowLevel(E,y,r,n)};
/**
     * Encode the given symbol info to a bit matrix.
     *
     * @param placement  The DataMatrix placement.
     * @param symbolInfo The symbol info to encode.
     * @return The bit matrix generated.
     */DataMatrixWriter.prototype.encodeLowLevel=function(t,e,r,n){var o=e.getSymbolDataWidth();var i=e.getSymbolDataHeight();var a=new nt(e.getSymbolWidth(),e.getSymbolHeight());var s=0;for(var c=0;c<i;c++){var h=void 0;if(c%e.matrixHeight===0){h=0;for(var u=0;u<e.getSymbolWidth();u++){a.setBoolean(h,s,u%2===0);h++}s++}h=0;for(u=0;u<o;u++){if(u%e.matrixWidth===0){a.setBoolean(h,s,true);h++}a.setBoolean(h,s,t.getBit(u,c));h++;if(u%e.matrixWidth===e.matrixWidth-1){a.setBoolean(h,s,c%2===0);h++}}s++;if(c%e.matrixHeight===e.matrixHeight-1){h=0;for(u=0;u<e.getSymbolWidth();u++){a.setBoolean(h,s,true);h++}s++}}return this.convertByteMatrixToBitMatrix(a,r,n)};
/**
     * Convert the ByteMatrix to BitMatrix.
     *
     * @param reqHeight The requested height of the image (in pixels) with the Datamatrix code
     * @param reqWidth The requested width of the image (in pixels) with the Datamatrix code
     * @param matrix The input matrix.
     * @return The output matrix.
     */DataMatrixWriter.prototype.convertByteMatrixToBitMatrix=function(t,e,r){var n=t.getWidth();var o=t.getHeight();var i=Math.max(e,n);var a=Math.max(r,o);var s=Math.min(i/n,a/o);var c=(i-n*s)/2;var h=(a-o*s)/2;var u;if(r<o||e<n){c=0;h=0;u=new $(n,o)}else u=new $(e,r);u.clear();for(var d=0,f=h;d<o;d++,f+=s)for(var l=0,p=c;l<n;l++,p+=s)1===t.get(l,d)&&u.setRegion(p,f,s,s);return u};return DataMatrixWriter}();var De=function(){function AztecCode(){}AztecCode.prototype.isCompact=function(){return this.compact};AztecCode.prototype.setCompact=function(t){this.compact=t};AztecCode.prototype.getSize=function(){return this.size};AztecCode.prototype.setSize=function(t){this.size=t};AztecCode.prototype.getLayers=function(){return this.layers};AztecCode.prototype.setLayers=function(t){this.layers=t};AztecCode.prototype.getCodeWords=function(){return this.codeWords};AztecCode.prototype.setCodeWords=function(t){this.codeWords=t};AztecCode.prototype.getMatrix=function(){return this.matrix};AztecCode.prototype.setMatrix=function(t){this.matrix=t};return AztecCode}();var Le=function(){function Collections(){}Collections.singletonList=function(t){return[t]};Collections.min=function(t,e){return t.sort(e)[0]};return Collections}();var Oe=function(){function Token(t){this.previous=t}Token.prototype.getPrevious=function(){return this.previous};return Token}();var Pe=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());var Ne=function(t){Pe(SimpleToken,t);function SimpleToken(e,r,n){var o=t.call(this,e)||this;o.value=r;o.bitCount=n;return o}SimpleToken.prototype.appendTo=function(t,e){t.appendBits(this.value,this.bitCount)};SimpleToken.prototype.add=function(t,e){return new SimpleToken(this,t,e)};SimpleToken.prototype.addBinaryShift=function(t,e){console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token");return new SimpleToken(this,t,e)};SimpleToken.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;t|=1<<this.bitCount;return"<"+et.toBinaryString(t|1<<this.bitCount).substring(1)+">"};return SimpleToken}(Oe);var We=(void 0,function(){var extendStatics=function(t,e){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return extendStatics(t,e)};return function(t,e){extendStatics(t,e);function __(){this.constructor=t}t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}}());var ke=function(t){We(BinaryShiftToken,t);function BinaryShiftToken(e,r,n){var o=t.call(this,e,0,0)||this;o.binaryShiftStart=r;o.binaryShiftByteCount=n;return o}BinaryShiftToken.prototype.appendTo=function(t,e){for(var r=0;r<this.binaryShiftByteCount;r++){if(0===r||31===r&&this.binaryShiftByteCount<=62){t.appendBits(31,5);this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):0===r?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)}t.appendBits(e[this.binaryShiftStart+r],8)}};BinaryShiftToken.prototype.addBinaryShift=function(t,e){return new BinaryShiftToken(this,t,e)};BinaryShiftToken.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"};return BinaryShiftToken}(Ne);function addBinaryShift(t,e,r){return new ke(t,e,r)}function add(t,e,r){return new Ne(t,e,r)}var Fe=["UPPER","LOWER","DIGIT","MIXED","PUNCT"];var He=0;var je=1;var ze=2;var Xe=3;var Ue=4;var Ve=new Ne(null,0,0);var Qe=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];var Ze=(void 0,function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){t&&n>=t.length&&(t=void 0);return{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")});function static_SHIFT_TABLE(t){var e,r;try{for(var n=Ze(t),o=n.next();!o.done;o=n.next()){var i=o.value;tt.fill(i,-1)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}t[He][Ue]=0;t[je][Ue]=0;t[je][He]=28;t[Xe][Ue]=0;t[ze][Ue]=0;t[ze][He]=15;return t}var Ge=static_SHIFT_TABLE(tt.createInt32Array(6,6));var Ye=(void 0,function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){t&&n>=t.length&&(t=void 0);return{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")});var qe=function(){function State(t,e,r,n){this.token=t;this.mode=e;this.binaryShiftByteCount=r;this.bitCount=n}State.prototype.getMode=function(){return this.mode};State.prototype.getToken=function(){return this.token};State.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount};State.prototype.getBitCount=function(){return this.bitCount};State.prototype.latchAndAppend=function(t,e){var r=this.bitCount;var n=this.token;if(t!==this.mode){var o=Qe[this.mode][t];n=add(n,65535&o,o>>16);r+=o>>16}var i=t===ze?4:5;n=add(n,e,i);return new State(n,t,0,r+i)};State.prototype.shiftAndAppend=function(t,e){var r=this.token;var n=this.mode===ze?4:5;r=add(r,Ge[this.mode][t],n);r=add(r,e,5);return new State(r,this.mode,0,this.bitCount+n+5)};State.prototype.addBinaryShiftChar=function(t){var e=this.token;var r=this.mode;var n=this.bitCount;if(this.mode===Ue||this.mode===ze){var o=Qe[r][He];e=add(e,65535&o,o>>16);n+=o>>16;r=He}var i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8;var a=new State(e,r,this.binaryShiftByteCount+1,n+i);2078===a.binaryShiftByteCount&&(a=a.endBinaryShift(t+1));return a};State.prototype.endBinaryShift=function(t){if(0===this.binaryShiftByteCount)return this;var e=this.token;e=addBinaryShift(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount);return new State(e,this.mode,0,this.bitCount)};State.prototype.isBetterThanOrEqualTo=function(t){var e=this.bitCount+(Qe[this.mode][t.mode]>>16);this.binaryShiftByteCount<t.binaryShiftByteCount?e+=State.calculateBinaryShiftCost(t)-State.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10);return e<=t.bitCount};State.prototype.toBitArray=function(t){var e,r;var n=[];for(var o=this.endBinaryShift(t.length).token;null!==o;o=o.getPrevious())n.unshift(o);var i=new rt;try{for(var a=Ye(n),s=a.next();!s.done;s=a.next()){var c=s.value;c.appendTo(i,t)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i};State.prototype.toString=function(){return z.format("%s bits=%d bytes=%d",Fe[this.mode],this.bitCount,this.binaryShiftByteCount)};State.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0};State.INITIAL_STATE=new State(Ve,He,0,0);return State}();function static_CHAR_MAP(t){var e=z.getCharCode(" ");var r=z.getCharCode(".");var n=z.getCharCode(",");t[He][e]=1;var o=z.getCharCode("Z");var i=z.getCharCode("A");for(var a=i;a<=o;a++)t[He][a]=a-i+2;t[je][e]=1;var s=z.getCharCode("z");var c=z.getCharCode("a");for(a=c;a<=s;a++)t[je][a]=a-c+2;t[ze][e]=1;var h=z.getCharCode("9");var u=z.getCharCode("0");for(a=u;a<=h;a++)t[ze][a]=a-u+2;t[ze][n]=12;t[ze][r]=13;var d=["\0"," ","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","@","\\","^","_","`","|","~",""];for(var f=0;f<d.length;f++)t[Xe][z.getCharCode(d[f])]=f;var l=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(f=0;f<l.length;f++)z.getCharCode(l[f])>0&&(t[Ue][z.getCharCode(l[f])]=f);return t}var $e=static_CHAR_MAP(tt.createInt32Array(5,256));var Je=(void 0,function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){t&&n>=t.length&&(t=void 0);return{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")});var Ke=function(){function HighLevelEncoder(t){this.text=t}HighLevelEncoder.prototype.encode=function(){var t=z.getCharCode(" ");var e=z.getCharCode("\n");var r=Le.singletonList(qe.INITIAL_STATE);for(var n=0;n<this.text.length;n++){var o=void 0;var i=n+1<this.text.length?this.text[n+1]:0;switch(this.text[n]){case z.getCharCode("\r"):o=i===e?2:0;break;case z.getCharCode("."):o=i===t?3:0;break;case z.getCharCode(","):o=i===t?4:0;break;case z.getCharCode(":"):o=i===t?5:0;break;default:o=0}if(o>0){r=HighLevelEncoder.updateStateListForPair(r,n,o);n++}else r=this.updateStateListForChar(r,n)}var a=Le.min(r,(function(t,e){return t.getBitCount()-e.getBitCount()}));return a.toBitArray(this.text)};HighLevelEncoder.prototype.updateStateListForChar=function(t,e){var r,n;var o=[];try{for(var i=Je(t),a=i.next();!a.done;a=i.next()){var s=a.value;this.updateStateForChar(s,e,o)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return HighLevelEncoder.simplifyStates(o)};HighLevelEncoder.prototype.updateStateForChar=function(t,e,r){var n=255&this.text[e];var o=$e[t.getMode()][n]>0;var i=null;for(var a=0;a<=Ue;a++){var s=$e[a][n];if(s>0){null==i&&(i=t.endBinaryShift(e));if(!o||a===t.getMode()||a===ze){var c=i.latchAndAppend(a,s);r.push(c)}if(!o&&Ge[t.getMode()][a]>=0){var h=i.shiftAndAppend(a,s);r.push(h)}}}if(t.getBinaryShiftByteCount()>0||0===$e[t.getMode()][n]){var u=t.addBinaryShiftChar(e);r.push(u)}};HighLevelEncoder.updateStateListForPair=function(t,e,r){var n,o;var i=[];try{for(var a=Je(t),s=a.next();!s.done;s=a.next()){var c=s.value;this.updateStateForPair(c,e,r,i)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return this.simplifyStates(i)};HighLevelEncoder.updateStateForPair=function(t,e,r,n){var o=t.endBinaryShift(e);n.push(o.latchAndAppend(Ue,r));t.getMode()!==Ue&&n.push(o.shiftAndAppend(Ue,r));if(3===r||4===r){var i=o.latchAndAppend(ze,16-r).latchAndAppend(ze,1);n.push(i)}if(t.getBinaryShiftByteCount()>0){var a=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);n.push(a)}};HighLevelEncoder.simplifyStates=function(t){var e,r,n,o;var i=[];try{for(var a=Je(t),s=a.next();!s.done;s=a.next()){var c=s.value;var h=true;var _loop_1=function(t){if(t.isBetterThanOrEqualTo(c)){h=false;return"break"}c.isBetterThanOrEqualTo(t)&&(i=i.filter((function(e){return e!==t})))};try{for(var u=(n=void 0,Je(i)),d=u.next();!d.done;d=u.next()){var f=d.value;var l=_loop_1(f);if("break"===l)break}}catch(t){n={error:t}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}h&&i.push(c)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i};return HighLevelEncoder}();var tr=(void 0,function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){t&&n>=t.length&&(t=void 0);return{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")});var er=function(){function Encoder(){}
/**
     * Encodes the given binary content as an Aztec symbol
     *
     * @param data input data string
     * @return Aztec symbol matrix with metadata
     */Encoder.encodeBytes=function(t){return Encoder.encode(t,Encoder.DEFAULT_EC_PERCENT,Encoder.DEFAULT_AZTEC_LAYERS)};
/**
     * Encodes the given binary content as an Aztec symbol
     *
     * @param data input data string
     * @param minECCPercent minimal percentage of error check words (According to ISO/IEC 24778:2008,
     *                      a minimum of 23% + 3 words is recommended)
     * @param userSpecifiedLayers if non-zero, a user-specified value for the number of layers
     * @return Aztec symbol matrix with metadata
     */Encoder.encode=function(t,e,r){var n=new Ke(t).encode();var o=et.truncDivision(n.getSize()*e,100)+11;var i=n.getSize()+o;var a;var s;var c;var h;var u;if(r!==Encoder.DEFAULT_AZTEC_LAYERS){a=r<0;s=Math.abs(r);if(s>(a?Encoder.MAX_NB_BITS_COMPACT:Encoder.MAX_NB_BITS))throw new _(z.format("Illegal value %s for layers",r));c=Encoder.totalBitsInLayer(s,a);h=Encoder.WORD_SIZE[s];var d=c-c%h;u=Encoder.stuffBits(n,h);if(u.getSize()+o>d)throw new _("Data to large for user specified layer");if(a&&u.getSize()>64*h)throw new _("Data to large for user specified layer")}else{h=0;u=null;for(var f=0;;f++){if(f>Encoder.MAX_NB_BITS)throw new _("Data too large for an Aztec code");a=f<=3;s=a?f+1:f;c=Encoder.totalBitsInLayer(s,a);if(!(i>c)){if(null==u||h!==Encoder.WORD_SIZE[s]){h=Encoder.WORD_SIZE[s];u=Encoder.stuffBits(n,h)}d=c-c%h;if(!(a&&u.getSize()>64*h)&&u.getSize()+o<=d)break}}}var l=Encoder.generateCheckWords(u,c,h);var p=u.getSize()/h;var v=Encoder.generateModeMessage(a,s,p);var g=(a?11:14)+4*s;var C=new Int32Array(g);var y;if(a){y=g;for(f=0;f<C.length;f++)C[f]=f}else{y=g+1+2*et.truncDivision(et.truncDivision(g,2)-1,15);var m=et.truncDivision(g,2);var E=et.truncDivision(y,2);for(f=0;f<m;f++){var S=f+et.truncDivision(f,15);C[m-f-1]=E-S-1;C[m+f]=E+S+1}}var w=new $(y);f=0;for(var A=0;f<s;f++){var I=4*(s-f)+(a?9:12);for(var b=0;b<I;b++){var B=2*b;for(var M=0;M<2;M++){l.get(A+B+M)&&w.set(C[2*f+M],C[2*f+b]);l.get(A+2*I+B+M)&&w.set(C[2*f+b],C[g-1-2*f-M]);l.get(A+4*I+B+M)&&w.set(C[g-1-2*f-M],C[g-1-2*f-b]);l.get(A+6*I+B+M)&&w.set(C[g-1-2*f-b],C[2*f+M])}}A+=8*I}Encoder.drawModeMessage(w,a,y,v);if(a)Encoder.drawBullsEye(w,et.truncDivision(y,2),5);else{Encoder.drawBullsEye(w,et.truncDivision(y,2),7);for(f=0,b=0;f<et.truncDivision(g,2)-1;f+=15,b+=16)for(M=1&et.truncDivision(y,2);M<y;M+=2){w.set(et.truncDivision(y,2)-b,M);w.set(et.truncDivision(y,2)+b,M);w.set(M,et.truncDivision(y,2)-b);w.set(M,et.truncDivision(y,2)+b)}}var x=new De;x.setCompact(a);x.setSize(y);x.setLayers(s);x.setCodeWords(p);x.setMatrix(w);return x};Encoder.drawBullsEye=function(t,e,r){for(var n=0;n<r;n+=2)for(var o=e-n;o<=e+n;o++){t.set(o,e-n);t.set(o,e+n);t.set(e-n,o);t.set(e+n,o)}t.set(e-r,e-r);t.set(e-r+1,e-r);t.set(e-r,e-r+1);t.set(e+r,e-r);t.set(e+r,e-r+1);t.set(e+r,e+r-1)};Encoder.generateModeMessage=function(t,e,r){var n=new rt;if(t){n.appendBits(e-1,2);n.appendBits(r-1,6);n=Encoder.generateCheckWords(n,28,4)}else{n.appendBits(e-1,5);n.appendBits(r-1,11);n=Encoder.generateCheckWords(n,40,4)}return n};Encoder.drawModeMessage=function(t,e,r,n){var o=et.truncDivision(r,2);if(e)for(var i=0;i<7;i++){var a=o-3+i;n.get(i)&&t.set(a,o-5);n.get(i+7)&&t.set(o+5,a);n.get(20-i)&&t.set(a,o+5);n.get(27-i)&&t.set(o-5,a)}else for(i=0;i<10;i++){a=o-5+i+et.truncDivision(i,5);n.get(i)&&t.set(a,o-7);n.get(i+10)&&t.set(o+7,a);n.get(29-i)&&t.set(a,o+7);n.get(39-i)&&t.set(o-7,a)}};Encoder.generateCheckWords=function(t,e,r){var n,o;var i=t.getSize()/r;var a=new y(Encoder.getGF(r));var s=et.truncDivision(e,r);var c=Encoder.bitsToWords(t,r,s);a.encode(c,s-i);var h=e%r;var u=new rt;u.appendBits(0,h);try{for(var d=tr(Array.from(c)),f=d.next();!f.done;f=d.next()){var l=f.value;u.appendBits(l,r)}}catch(t){n={error:t}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}return u};Encoder.bitsToWords=function(t,e,r){var n=new Int32Array(r);var o;var i;for(o=0,i=t.getSize()/e;o<i;o++){var a=0;for(var s=0;s<e;s++)a|=t.get(o*e+s)?1<<e-s-1:0;n[o]=a}return n};Encoder.getGF=function(t){switch(t){case 4:return T.AZTEC_PARAM;case 6:return T.AZTEC_DATA_6;case 8:return T.AZTEC_DATA_8;case 10:return T.AZTEC_DATA_10;case 12:return T.AZTEC_DATA_12;default:throw new _("Unsupported word size "+t)}};Encoder.stuffBits=function(t,e){var r=new rt;var n=t.getSize();var o=(1<<e)-2;for(var i=0;i<n;i+=e){var a=0;for(var s=0;s<e;s++)(i+s>=n||t.get(i+s))&&(a|=1<<e-1-s);if((a&o)===o){r.appendBits(a&o,e);i--}else if(0===(a&o)){r.appendBits(1|a,e);i--}else r.appendBits(a,e)}return r};Encoder.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t};Encoder.DEFAULT_EC_PERCENT=33;Encoder.DEFAULT_AZTEC_LAYERS=0;Encoder.MAX_NB_BITS=32;Encoder.MAX_NB_BITS_COMPACT=4;Encoder.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);return Encoder}();var rr=function(){function AztecWriter(){}AztecWriter.prototype.encode=function(t,e,r,n){return this.encodeWithHints(t,e,r,n,null)};AztecWriter.prototype.encodeWithHints=function(t,e,r,n,o){var i=At.ISO_8859_1;var a=er.DEFAULT_EC_PERCENT;var s=er.DEFAULT_AZTEC_LAYERS;if(null!=o){o.has(p.CHARACTER_SET)&&(i=wt.forName(o.get(p.CHARACTER_SET).toString()));o.has(p.ERROR_CORRECTION)&&(a=et.parseInt(o.get(p.ERROR_CORRECTION).toString()));o.has(p.AZTEC_LAYERS)&&(s=et.parseInt(o.get(p.AZTEC_LAYERS).toString()))}return AztecWriter.encodeLayers(t,e,r,n,i,a,s)};AztecWriter.encodeLayers=function(t,e,r,n,o,i,a){if(e!==Z.AZTEC)throw new _("Can only encode AZTEC, but got "+e);var s=er.encode(z.getBytes(t,o),i,a);return AztecWriter.renderResult(s,r,n)};AztecWriter.renderResult=function(t,e,r){var n=t.getMatrix();if(null==n)throw new x;var o=n.getWidth();var i=n.getHeight();var a=Math.max(e,o);var s=Math.max(r,i);var c=Math.min(a/o,s/i);var h=(a-o*c)/2;var u=(s-i*c)/2;var d=new $(a,s);for(var f=0,l=u;f<i;f++,l+=c)for(var p=0,v=h;p<o;p++,v+=c)n.get(p,f)&&d.setRegion(v,l,c,c);return d};return AztecWriter}();export{De as AztecCode,rr as AztecCodeWriter,er as AztecEncoder,Ke as AztecHighLevelEncoder,it as BrowserAztecCodeReader,st as BrowserBarcodeReader,ht as BrowserDatamatrixCodeReader,dt as BrowserPDF417Reader,lt as BrowserQRCodeReader,pt as BrowserQRCodeSvgWriter,It as DataMatrixDefaultPlacement,Jt as DataMatrixErrorCorrection,pe as DataMatrixHighLevelEncoder,ie as DataMatrixSymbolInfo,Rt as DataMatrixSymbolShapeHint,Re as DataMatrixWriter,gt as MultiFormatWriter,yt as PlanarYUVLuminanceSource,vt as QRCodeWriter,Et as RGBLuminanceSource,wt as ZXingCharset,At as ZXingStandardCharsets};

