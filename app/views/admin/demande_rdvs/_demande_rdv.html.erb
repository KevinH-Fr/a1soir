<div id="<%= dom_id demande_rdv %>" class="my-2">
  <div class="card mx-2 mb-3 light-beige-colored shadow-sm">
    <div class="card-body p-1">

        <div class="card-title d-flex">
          <div data-turbo="false">
            <%= link_to admin_demande_rdv_path(demande_rdv), class: "text-decoration-none text-dark" do %>
              <%= custom_badge("", "", "", "fw-bold", demande_rdv.full_name) if demande_rdv.nom.present? %>
            <% end %>
          </div>
          <%= badge_statut_demande_cabine(demande_rdv.statut) %>
          <%= custom_badge("fa-calendar", "", "", "", " envoyée le #{demande_rdv.created_at.strftime('%d/%m/%Y %H:%M')}") %>
          <%= custom_badge("fa-calendar-check", "", "", "", demande_rdv.date_rdv.strftime('%d/%m/%Y à %H:%M')) if demande_rdv.date_rdv.present? && demande_rdv.date_rdv.respond_to?(:strftime) %>

          <%= link_to "", "#collapseDemande#{dom_id(demande_rdv)}", 
                class: "btn btn-sm btn-outline-primary bi bi-eye m-1", "data-bs-toggle": "collapse", 
                role: "button", "aria-expanded": "false", "aria-controls": "collapseDemande#{dom_id(demande_rdv)}" %>

        </div>

        <div class="text-end">
          <%= links_record(demande_rdv) %>  
        </div>


  
      <div class="collapse px-2" id="collapseDemande<%= dom_id(demande_rdv) %>">

        <hr>

        <%= field_with_label("Prénom: ", demande_rdv.prenom) if demande_rdv.prenom.present? %>
        <%= field_with_label("Nom: ", demande_rdv.nom) if demande_rdv.nom.present? %>
        <%= field_with_label("Email: ", demande_rdv.email) if demande_rdv.email.present? %>
        <%= field_with_label("Téléphone: ", demande_rdv.telephone) if demande_rdv.telephone.present? %>
        <%= field_with_label("Date RDV: ", demande_rdv.date_rdv.strftime('%d/%m/%Y à %H:%M')) if demande_rdv.date_rdv.present? && demande_rdv.date_rdv.respond_to?(:strftime) %>
        <% if demande_rdv.type_rdv.present? %>
          <% type_rdv_label = demande_rdv.type_rdv.to_s.titleize %>
          <%= field_with_label("Type de RDV: ", type_rdv_label) %>
        <% end %>
        <%= field_with_label("Nombre de personnes: ", demande_rdv.nombre_personnes) if demande_rdv.nombre_personnes.present? %>
        <% if demande_rdv.type_rdv.present? %>
          <%= field_with_label("Durée du RDV: ", demande_rdv.duree_rdv_formatee) %>
        <% end %>
        <%= field_with_label("Statut: ", demande_rdv.statut) if demande_rdv.statut.present? %>
        <%= field_with_label("Commentaire: ", demande_rdv.commentaire) if demande_rdv.commentaire.present? %>

      </div>

    </div>

  </div>

</div>

