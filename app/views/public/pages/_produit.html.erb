<div class="col" style="width: 18rem;">
    
    <div data-controller="placeholder-card">

          <!-- Card with Placeholder -->
          <div class="card card-placeholder bg-dark text-light" aria-hidden="true">

              <div class="placeholder col-12" style="height: 300px; background-color: #3a3a3a;">
              </div>
                      
              <div class="card-body">
                  <h5 class="card-title placeholder-glow" data-placeholder-card-target="placeholder">
                      <span class="placeholder col-6 bg-secondary"></span>
                  </h5>
                  <p class="card-text placeholder-glow">
                      <span class="placeholder col-7 bg-secondary"></span>
                      <span class="placeholder col-4 bg-secondary"></span>
                      <span class="placeholder col-4 bg-secondary"></span>
                      <span class="placeholder col-6 bg-secondary"></span>
                      <span class="placeholder col-8 bg-secondary"></span>
                  </p>
                  <p class="card-text placeholder-glow d-flex justify-content-between">
                      <span class="placeholder col-5 bg-secondary"></span>
                      <span class="placeholder col-6 bg-secondary"></span>
                  </p>
                  <p class="card-text placeholder-glow d-flex justify-content-between">
                      <span class="placeholder col-4 bg-secondary"></span>
                      <span class="placeholder col-4 bg-secondary"></span>
                  </p>
              </div>
          </div>

          <!-- Real Content -->
          <div class="card card-content bg-dark text-light border-secondary" data-placeholder-card-target="content" style="display:none;">
              
              <%= link_to produit_path(slug: produit.nom.parameterize, id: produit.id), class: "text-decoration-none", data: { turbo: false } do %>
                  <%#= image_tag(produit.default_image, class: "card-img-top", style: "max-height: 300px; object-fit: cover;") %>
                  <%= render partial: "carousel", locals: { produit: produit, carousel_class: "card-img-top carousel-multiple" } %>
              <% end %>

              <div class="card-body">
                  <%= link_to produit_path(slug: produit.nom.parameterize, id: produit.id), class: "text-decoration-none", data: { turbo: false } do %>
                      <h5 class="card-title text-light">
                          <%= produit.nom %>
                      </h5>
                  <% end %>
                  <p class="card-text text-truncate-multiline text-light opacity-75">
                      <span>
                          <%= produit.description %>
                      </span>
                  </p>

                  <p class="card-text d-flex justify-content-between">
                      <%= badge_prix("Vente", produit.prixvente) %>
                      <%= badge_prix("Location", produit.prixlocation) if produit.prixlocation.present? %>
                  </p>
                  
                  <p class="card-text d-flex justify-content-between">
                      <% if params[:taille].present? %>
                          <%= badge_taille(produit) %>
                      <% else %>
                         <span></span>
                      <% end %>
                      <%#= statut_disponibilite_shop(produit.statut_disponibilite(Time.now, Time.now)[:statut]) %>
                  </p>
                  
                  <% if session[:from_cabine] %>
                      <%= turbo_frame_tag "produit_#{produit.id}_button" do %>
                          <div class="card-footer bg-transparent border-top border-secondary mt-3 pt-3 p-0">
                              <% if session[:cabine_cart].include?(produit.id) %>
                                  <%= button_to cabine_remove_product_path(produit), method: :delete, 
                                      class: "btn btn-sm w-100 btn-outline-danger" do %>
                                      <i class="bi bi-bag-x me-2"></i>Retirer de la cabine
                                  <% end %>
                              <% elsif session[:cabine_cart].size >= 10 %>
                                  <button type="button" class="btn btn-sm w-100 btn-secondary" disabled>
                                      <i class="bi bi-exclamation-triangle me-2"></i>Limite atteinte (10 produits max)
                                  </button>
                              <% else %>
                                  <%= button_to cabine_add_product_path(produit), 
                                      class: "btn btn-sm w-100 btn-smoke-hover text-light",
                                      style: "background: linear-gradient(135deg, rgba(208, 77, 123, 0.8), rgba(233, 107, 168, 0.8)); border: none;" do %>
                                      <i class="bi bi-bag-plus me-2"></i>Ajouter Ã  la cabine
                                  <% end %>
                              <% end %>
                          </div>
                      <% end %>
                  <% end %>
              </div>
          </div>
      </div>
</div>
