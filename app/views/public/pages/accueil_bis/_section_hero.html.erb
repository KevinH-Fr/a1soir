<%
  slides = [
    {
      video_url: "https://www.pexels.com/fr-fr/download/video/5379136/",
      title: "Titre Slide Vidéo",
      subtitle: "Sous-titre de la slide vidéo",
      button_text: "Découvrir",
      button_url: nos_collections_path
    },
    {
      image_url: "https://images.pexels.com/photos/15568344/pexels-photo-15568344.jpeg",
      title: "Titre Slide 1",
      subtitle: "Sous-titre de la première slide",
      button_text: "Découvrir",
      button_url: nos_collections_path
    },
    {
      image_url: "https://images.pexels.com/photos/14339112/pexels-photo-14339112.jpeg",
      title: "Titre Slide 2",
      subtitle: "Sous-titre de la deuxième slide",
      button_text: "En savoir plus",
      button_url: la_boutique_path
    },
    {
      image_url: "https://images.pexels.com/photos/208215/pexels-photo-208215.jpeg",
      title: "Titre Slide 3",
      subtitle: "Sous-titre de la troisième slide",
      right_text: "Texte à droite au-dessus du bouton",
      button_text: "Nous contacter",
      button_url: "#{contact_path}#message-form"
    }
  ]
%>

<div id="heroCarousel" class="carousel slide vh-100" data-bs-ride="carousel" style="height: 100vh;">
  <div class="carousel-inner h-100" style="height: 100vh;">
    <% slides.each_with_index do |slide, index| %>
      <div class="carousel-item <%= 'active' if index == 0 %> h-100 position-relative" style="min-height: 100vh; overflow: hidden;">
        <% if slide[:video_url].present? %>
          <!-- Vidéo -->
          <video autoplay muted loop playsinline class="position-absolute top-0 start-0 w-100 h-100 carousel-media" style="object-fit: cover; z-index: 0; transition: transform 0.6s ease;" data-carousel-media>
            <source src="<%= slide[:video_url] %>" type="video/mp4">
          </video>
          <!-- Overlay sombre pour la lisibilité (vidéo) -->
          <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0.6)); z-index: 1; pointer-events: none;"></div>
        <% elsif slide[:image_url].present? %>
          <!-- Image -->
          <%= image_tag slide[:image_url], class: "d-block w-100 h-100 carousel-media", style: "object-fit: cover; z-index: 0; transition: transform 0.6s ease;", alt: slide[:title], data: { carousel_media: "" } %>
          <!-- Overlay sombre pour la lisibilité (image) -->
          <div class="position-absolute top-0 start-0 w-100 h-100" style="background: rgba(0, 0, 0, 0.3); z-index: 1; pointer-events: none;"></div>
        <% end %>
        
        <!-- Overlay avec contenu -->
        <% 
          alignment_class = case index
            when 0 then 'align-items-start text-start'  # Slide 0 : texte à gauche
            when 1 then 'align-items-end text-end'      # Slide 1 : texte à droite
            when 2 then 'align-items-end text-start'      # Slide 2 : texte à droite
            else 'align-items-center'                   # Slide 3 : centré (avec deux colonnes)
          end
          padding_value = (index == 3) ? '2rem' : '4rem'
        %>
        <div class="position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center <%= alignment_class %> text-white" style="z-index: 2; padding: <%= padding_value %>; pointer-events: none;">
          <% if index == 3 %>
            <!-- Slide 3 : deux textes (gauche et droite) -->
            <div class="container w-100">
              <div class="row">
                <div class="col-md-6 text-start">
                  <% if slide[:title].present? %>
                    <h1 class="display-4 fw-bold mb-3" style="text-shadow: 0 2px 10px rgba(0,0,0,0.5);">
                      <%= slide[:title] %>
                    </h1>
                  <% end %>
                  
                  <% if slide[:subtitle].present? %>
                    <p class="lead mb-4" style="text-shadow: 0 1px 5px rgba(0,0,0,0.5);">
                      <%= slide[:subtitle] %>
                    </p>
                  <% end %>
                </div>
                
                <div class="col-md-6 text-end d-flex flex-column align-items-end">
                  <% if slide[:right_text].present? %>
                    <p class="lead mb-4" style="text-shadow: 0 1px 5px rgba(0,0,0,0.5);">
                      <%= slide[:right_text] %>
                    </p>
                  <% end %>
                  
                  <% if slide[:button_text].present? %>
                    <%= link_to slide[:button_text], slide[:button_url], class: "btn btn-light btn-lg px-5 public-btn-border-radius", style: "pointer-events: auto;" %>
                  <% end %>
                </div>
              </div>
            </div>
          <% else %>
            <!-- Slides avec contenu normal -->
            <% 
              # Slide 0 : vidéo avec texte à gauche
              # Slide 1 : image avec texte à droite
              # Slide 2 : image avec texte à droite
            %>
            <div class="<%= 'container' if index == 0 || index == 1 || index == 2 %>">
              <% if slide[:title].present? %>
                <h1 class="display-4 fw-bold mb-3" style="text-shadow: 0 2px 10px rgba(0,0,0,0.5);">
                  <%= slide[:title] %>
                </h1>
              <% end %>
              
              <% if slide[:subtitle].present? %>
                <p class="lead mb-4" style="text-shadow: 0 1px 5px rgba(0,0,0,0.5);">
                  <%= slide[:subtitle] %>
                </p>
              <% end %>
              
              <% if slide[:button_text].present? %>
                <%= link_to slide[:button_text], slide[:button_url], class: "btn btn-light btn-lg px-5 public-btn-border-radius", style: "pointer-events: auto;" %>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
  
  <!-- Contrôles précédent/suivant -->
  <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev" style="position: absolute; width: 60px; height: 60px; border-radius: 50%; background: rgba(255, 255, 255, 0.2); border: none; top: 50%; transform: translateY(-50%); left: 20px; z-index: 10; display: flex; align-items: center; justify-content: center; padding: 0;">
    <span class="carousel-control-prev-icon" aria-hidden="true" style="width: 20px; height: 20px;"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next" style="position: absolute; width: 60px; height: 60px; border-radius: 50%; background: rgba(255, 255, 255, 0.2); border: none; top: 50%; transform: translateY(-50%); right: 20px; z-index: 10; display: flex; align-items: center; justify-content: center; padding: 0;">
    <span class="carousel-control-next-icon" aria-hidden="true" style="width: 20px; height: 20px;"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>
